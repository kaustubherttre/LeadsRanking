(this.webpackJsonpMatrix_Dashboard=this.webpackJsonpMatrix_Dashboard||[]).push([[112],{1297:function(e,t,a){"use strict";a.r(t);var n=a(39),s=a(40),i=a(121),l=a(42),r=a(41),o=a(0),c=a.n(o),u=a(61),d=a(90),m=a(30),h=a(449),g=a.n(h),p=a(441),v=a(91),E=a.n(v),f=a(457),b=a(430),S=(a(427),a(530)),y=a(424),A=a(531),k=a(533),C=a(563),O=a(532),w=a(420),I=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={PageTitle:"RealTime Panel",AgentData:[],TotalData:[],items:[],key:"ALL",SelectedSupervisors:[],winactive:0},s.handleShow=s.handleShow.bind(Object(i.a)(s)),s.statuschange=s.statuschange.bind(Object(i.a)(s)),s._handleKeyDown=s._handleKeyDown.bind(Object(i.a)(s)),s.userAgent=null,s.winactive=0,s.schdular=null,s.columnlist=[{name:"Barging",selector:"Barging",sortable:!0,width:"80px",cell:function(e){return c.a.createElement("div",{className:["BUSY","RINGING"].indexOf(e.Status)>-1?"":"hide"},c.a.createElement("button",{onClick:function(t){return s.bargecall(t,e)},className:e.Barge?"hide":"show"},c.a.createElement("i",{className:"fa fa-volume-up","aria-hidden":"true"})))}},{name:"Agent Code",selector:"AgentCode",sortable:!0},{name:"Status",selector:"Status",sortable:!0,cell:function(e){return c.a.createElement("div",{className:s.displayStatus(e)+" RealtimeStatus"},s.displayStatus(e))}},{name:"Agent Name",selector:"AgentName",sortable:!0},{name:"TL Name",selector:"TLName",sortable:!0},{name:"Call Type",selector:"CallType"},{name:"Lead Id",selector:"LeadId",sortable:!0},{name:"Since",selector:"LastUpdatedOn",sortable:!0,width:"130px",cell:function(e){return c.a.createElement("div",{className:e.AgentCode},e.LastUpdatedOn?c.a.createElement(E.a,{utc:!0,from:e.ServerTime},e.LastUpdatedOn):"N.A")}},{name:"T Calls",selector:"TotalCalls",width:"70px",sortable:!0},{name:"U Dials",selector:"UniqueDials",width:"70px",sortable:!0},{name:"C Dials",selector:"ConnectedDials",width:"70px",sortable:!0},{name:"VCCount",selector:"VCCount",sortable:!0},{name:"VCConnectCount",selector:"VCConnectCount",sortable:!0},{name:"T TalkTime",selector:"TotalTalkTime",sortable:!0,width:"130px",cell:function(e){return Object(d.k)(e.TotalTalkTime)}},{name:"D.C.",selector:"CallingCompany",sortable:!0},{name:"DIDNo",selector:"DIDNo",sortable:!0}],s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.j)();this.setState({SelectedSupervisors:[""==Object(d.i)("m")?e.EmployeeId:Object(d.i)("m")]},function(){this.UserList()}.bind(this)),null==this.schdular&&(this.schdular=setInterval(function(){(1==this.state.winactive||document.hasFocus())&&this.UserList()}.bind(this),2500),window.addEventListener("message",function(e){"checkactive"==e.data.type&&(this.setState({winactive:e.data.winactive}),this.winactive=e.data.winactive)}.bind(this)))}},{key:"totalList",value:function(){var e=Object(d.i)("c");""!=e&&Object(u.t)(e,function(e){this.setState({TotalData:e.data})}.bind(this))}},{key:"UserList",value:function(){var e=Object(d.i)("m"),t=Object(d.i)("c"),a=Object(d.j)();this.state.SelectedSupervisors.length>0&&(e=this.state.SelectedSupervisors.join()),""==e&&""==t&&(e=a.EmployeeId,this.setState({SelectedSupervisors:[e]})),Object(u.q)(e,t,function(e){this.setState({AgentData:e.data})}.bind(this))}},{key:"handleShow",value:function(e){this.setState({SelectedSupervisors:e.SelectedSupervisors})}},{key:"componentWillUnmount",value:function(){clearInterval(this.schdular),null!=this.userAgent&&(this.userAgent.hangup(),sessionStorage.setItem("BargeWith",""))}},{key:"displayStatus",value:function(e){var t=sessionStorage.getItem("BargeWith")?sessionStorage.getItem("BargeWith"):"";return t==e.AgentCode&&-1==["BUSY","RINGING"].indexOf(e.Status)?this.unbargecall():t==e.AgentCode&&e.Status,e.Status.toUpperCase()}},{key:"unbargecall",value:function(e){this.userAgent&&(this.userAgent.hangup(),this.userAgent=null),sessionStorage.setItem("BargeWith","")}},{key:"bargecall",value:function(e,t){try{console.log("clicked with : "+t.AgentCode),this.userAgent&&(this.userAgent.hangup(),this.userAgent=null,sessionStorage.setItem("BargeWith","")),sessionStorage.setItem("BargeWith",t.AgentCode);var a={Display:Object(d.j)().EmployeeId,User:Object(d.j)().EmployeeId,Pass:Object(d.j)().EmployeeId,Realm:t.Asterisk_Url,WSServer:"wss://"+t.Asterisk_Url+":8089/ws"};this.LoginAsteriskServer(a,function(){if(console.log("Barge with : "+t.AgentCode),console.log("sessionStorage with : "+sessionStorage.getItem("BargeWith")),sessionStorage.getItem("BargeWith")==t.AgentCode&&this.userAgent){var e="*222"+t.AgentCode;"WFH"!=t.CallingCompany&&"KNOWLARITY"!=t.CallingCompany||(e="*222"+t.DIDNo),this.userAgent.call(e)}}.bind(this),function(){document.getElementById(t.AgentCode)&&(document.getElementById(t.AgentCode).checked=!1),sessionStorage.setItem("BargeWith","")}.bind(this))}catch(e){}}},{key:"LoginAsteriskServer",value:function(e,t,a){if(e){var n={media:{remote:{audio:document.getElementById("audioRemote")}},ua:{uri:e.User+"@"+e.Realm,wsServers:[e.WSServer],authorizationUser:e.Display,password:e.Pass}};f.Web&&(this.userAgent=new f.Web.Simple(n),this.userAgent.on("connected",(function(e){Object(b.b)("Barging Connected!",{type:"success"})})),this.userAgent.on("disconnected",(function(e){})),this.userAgent.on("registered",(function(e){t&&t()})),this.userAgent.on("registrationFailed",(function(e){Object(b.b)("Make sure your VPN is connected!",{type:"error"})})),this.userAgent.on("unregistered",(function(e){Object(b.b)("Dialer issue please contact administrator!",{type:"error"}),a&&a()})),this.userAgent.on("userMediaFailed",(function(e){})),this.userAgent.on("userMediaRequest",(function(e){})),this.userAgent.on("userMedia",(function(e){})),this.userAgent.on("invite",(function(e){})),this.userAgent.on("addStream",(function(e){})),this.userAgent.on("ended",(function(e){})))}return setTimeout(function(){this.userAgent&&this.userAgent.ua&&0==this.userAgent.ua.isRegistered()&&Object(b.b)("Make sure your VPN is connected!",{type:"error"})}.bind(this),1e4),this.userAgent}},{key:"componentWillReceiveProps",value:function(e){e.CommonData.isError}},{key:"statuschange",value:function(e){this.setState({key:e.target.value})}},{key:"filterdata",value:function(e){var t=this,a=this.state.AgentData;if("ALL"===this.state.key)return a;if("Away"===this.state.key){var n=[];return a.forEach((function(e){(new Date-new Date(e.LastUpdatedOn))/1e3>60&&"IDLE"===e.Status&&n.push(e)})),n}var s=[];return a.forEach((function(e){t.state.key.indexOf(e.Status)>-1&&s.push(e)})),s}},{key:"_handleKeyDown",value:function(e){"Enter"===e.key&&this.setState({SelectedSupervisors:[e.target.value]})}},{key:"_handleOnClick",value:function(e){this.setState({SelectedSupervisors:[document.getElementById("EmpId").value]})}},{key:"renderTotalData",value:function(){var e=Object(d.i)("c"),t=this.state.TotalData;return""!=e?c.a.createElement("div",null,c.a.createElement("div",{className:"totaldata"},c.a.createElement(S.a,null),c.a.createElement(S.a,null,c.a.createElement(y.a,{md:2},c.a.createElement("span",{className:"totaltext"},"Context : ",t.context)),c.a.createElement(y.a,{md:2},c.a.createElement("span",{className:"totaltext"},"Answered : ",t.answered)),c.a.createElement(y.a,{md:2},c.a.createElement("span",{className:"totaltext"},"Unanswered : ",t.unanswered)),c.a.createElement(y.a,{md:2},c.a.createElement("span",{className:"totaltext"},"# Agents : ",t.totalAgents)),c.a.createElement(y.a,{md:2},c.a.createElement("span",{className:"totaltext"},"Waiting Calls : ",t.waitingCalls)),c.a.createElement(y.a,{md:2},c.a.createElement("span",{className:"totaltext"},"# Avail. Agents : ",t.totalAvailableAgents)))),c.a.createElement("br",null)):null}},{key:"render",value:function(){var e=this,t=this.columnlist,a=(this.totalcolumnlist,this.filterdata()),n=Object(d.i)("m"),s=Object(d.i)("c"),i=this.state,l=(i.items,i.PageTitle),r=sessionStorage.getItem("BargeWith")?sessionStorage.getItem("BargeWith"):"";return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"content"},c.a.createElement(b.a,null),c.a.createElement(S.a,null,c.a.createElement(y.a,{md:"12"},c.a.createElement(A.a,null,c.a.createElement(k.a,null,c.a.createElement(S.a,null,c.a.createElement(y.a,{md:3},c.a.createElement(C.a,{tag:"h4"},l)),c.a.createElement(y.a,{md:4},c.a.createElement(C.a,{tag:"h6"},this.state.SelectedSupervisors.join())),c.a.createElement(y.a,{md:3},c.a.createElement("div",{className:"input-group"},c.a.createElement(w.a.Control,{required:!0,type:"text",name:"EmpId",id:"EmpId",onKeyDown:this._handleKeyDown,onChange:function(t){return e.setState({username:t.target.value})},value:this.state.username,placeholder:"Enter Supervisor Id"}),c.a.createElement("div",{className:"input-group-append"},c.a.createElement("button",{onClick:function(t){return e._handleOnClick(t)},className:"btn btn-primary input-group-button"},c.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"}))))),c.a.createElement(y.a,{md:2},c.a.createElement("div",{className:"form-group"},c.a.createElement("select",{className:"form-control",onChange:this.statuschange},c.a.createElement("option",{value:"ALL"},"ALL"),c.a.createElement("option",{value:"IDLE"},"IDLE"),c.a.createElement("option",{value:"Away"},"Away"),c.a.createElement("option",{value:"BUSY"},"BUSY"),c.a.createElement("option",{value:"Lunch,Tea,Training,Meeting,Day End"},"Break"),c.a.createElement("option",{value:"PAUSE"},"PAUSE"),c.a.createElement("option",{value:"Auto Logout,LOGOUT"},"LOGOUT"))),""==n&&""==s?c.a.createElement(p.a,{handleShow:this.handleShow,value:/EmployeeId/g}):null,c.a.createElement("button",{id:"BargeWith",onClick:function(t){return e.unbargecall(t)},className:""==r?"hide":"btn btn-primary hangupwith show"},c.a.createElement("i",{className:"fa fa-volume-off","aria-hidden":"true"})," Hang Up With: ",r)))),c.a.createElement(O.a,null,c.a.createElement("div",{className:"statusdata"},c.a.createElement(g.a,{columns:t,data:a,pagination:!1,striped:!0,noHeader:!0,highlightOnHover:!0,dense:!0}))))),c.a.createElement("audio",{id:"audioRemote"}),c.a.createElement("audio",{id:"audioLocal"}))))}}]),a}(c.a.Component);t.default=Object(m.b)((function(e){return{CommonData:e.CommonData}}),{GetCommonData:u.g,GetCommonspData:u.h})(I)},441:function(e,t,a){"use strict";var n=a(39),s=a(40),i=a(42),l=a(41),r=a(0),o=a.n(r),c=a(61),u=a(90),d=a(1289),m=a(185),h=(a(452),a(453)),g=a.n(h),p=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={nodes:[],checked:[],expanded:[]},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=2==Object(u.j)().RoleId?75:Object(u.j)().UserID;Object(c.k)({root:"Hierarchy",ManagerId:e,statename:"Hierarchy-"+e,value:this.props.value,state:!0},function(e){var t=JSON.stringify(e).replace(/UserName/g,"label");t=t.replace(this.props.value,"value"),this.setState({nodes:JSON.parse(t)})}.bind(this))}},{key:"componentWillReceiveProps",value:function(e){}},{key:"onButtonClick",value:function(){this.props.handleShow({SelectedSupervisors:this.state.checked}),this.forceUpdate()}},{key:"onMouseEnter",value:function(e){document.getElementById("floating").style.right=0,document.getElementById("handle").style.right="395px"}},{key:"onMouseOut",value:function(e){setTimeout((function(){document.getElementById("floating").style.right="-400px",document.getElementById("handle").style.right="-15px"}),700)}},{key:"RemoveChecked",value:function(e){var t=this.state.checked,a=t.indexOf(e);a>-1&&t.splice(a,1),this.setState(t)}},{key:"onClick",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.nodes;t.checked;return 0==a.length?null:o.a.createElement("div",{id:"floating",className:"floating",onMouseLeave:this.onMouseOut},o.a.createElement(d.a,null,o.a.createElement(m.a,{md:"8"},o.a.createElement("div",{id:"handle",className:"handle",onClick:this.onMouseEnter},"Filter")),o.a.createElement(m.a,{md:"4"},o.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.onButtonClick.bind(this),value:"Show"}))),o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement("div",{className:"managers"},o.a.createElement(g.a,{nodes:a,checked:this.state.checked,expanded:this.state.expanded,checkModel:"all",name:"UserName",showNodeIcon:!1,onCheck:function(t){return e.setState({checked:t})},onExpand:function(t){return e.setState({expanded:t})},showExpandAll:!0})))))}}]),a}(o.a.Component);t.a=p}}]);
//# sourceMappingURL=112.18c8ee70.chunk.js.map