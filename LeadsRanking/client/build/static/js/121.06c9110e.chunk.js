(this.webpackJsonpMatrix_Dashboard=this.webpackJsonpMatrix_Dashboard||[]).push([[121],{1306:function(e,t,a){"use strict";a.r(t);var n=a(123),o=a(39),l=a(40),i=a(121),s=a(42),r=a(41),m=a(0),c=a.n(m),u=a(1262),d=a(1336),h=a(61),f=a(124),g=(a(425),a(30)),D=a(431),v=(a(125),a(496)),p=a(91),b=a.n(p),C=a(51),E=a.n(C),y=a(92),j=(a(187),a(430)),M=(a(427),a(90)),O=a(530),Y=a(424),T=a(531),L=a(533),w=a(532),S=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).validationdate=function(e){return!e.isBefore(E()(n.state.maxdate))},n.state={isLoaded:!1,showModal:!1,items:[],store:[],activePage:1,root:"LoginLogoutDetails",PageTitle:"Login Logout History",FormTitle:"",formvalue:{},event:"",ModalValueChanged:!1,empid:"",CallDate:E()().format("YYYY-MM-DD"),departmentId:null,maxdate:E()().subtract(59,"days").format("YYYY-MM-DD"),ResponseData:[]},n.handleClose=n.handleClose.bind(Object(i.a)(n)),n.handleShow=n.handleShow.bind(Object(i.a)(n)),n.empchange=n.empchange.bind(Object(i.a)(n)),n.selectedrow={CallDataId:0,CallID:null,LeadID:null},n.columnlist=[{selector:"username",name:"UserName",type:"string",searchable:!0},{selector:"LoginTime",name:"LoginTime",type:"datetime",cell:function(e){return c.a.createElement("div",{className:"LoginTime"},e.LoginTime?c.a.createElement(b.a,{utc:!0,format:"YYYY-MM-DD HH:mm:ss"},e.LoginTime):"N.A")}},{selector:"LogoutTime",name:"LogoutTime",type:"datetime",cell:function(e){return c.a.createElement("div",{className:"LogoutTime"},e.LogoutTime?c.a.createElement(b.a,{utc:!0,format:"YYYY-MM-DD HH:mm:ss"},e.LogoutTime):"N.A")}}];return n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.columnlist.map((function(t){return Object(M.c)(t,e.props)})),setTimeout(function(){this.setState({user:Object(M.j)()})}.bind(this),500)}},{key:"fnBindStore",value:function(e,t){var a;"dropdown"==e.type&&(t.CommonData[this.state.root]&&t.CommonData[e.config.root]&&(a=Object(M.l)(t.CommonData[this.state.root],t.CommonData[e.config.root],e.name),this.setState({items:a})))}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.CommonData.isError||(this.setState({items:e.CommonData[this.state.root]}),this.setState({store:e.CommonData}),this.columnlist.map((function(a){return t.fnBindStore(a,e)})))}},{key:"fnDatatableCol",value:function(){return Object(M.e)(this.columnlist)}},{key:"handleCopy",value:function(e){this.setState({formvalue:Object.assign({},e,{}),event:"Copy",showModal:!0,FormTitle:"Copy Record"})}},{key:"handleEdit",value:function(e){this.setState({od:Object.assign({},e,{}),formvalue:Object.assign({},e,{}),event:"Edit",showModal:!0,FormTitle:"Edit Record"})}},{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"handleShow",value:function(){this.setState({formvalue:this.selectedrow,event:"Add",showModal:!0,FormTitle:"Add New Record"})}},{key:"empchange",value:function(e,t){this.setState({empid:e.target.value})}},{key:"CallDateChange",value:function(e,t){e._isAMomentObject&&this.setState({CallDate:e.format("YYYY-MM-DD")},(function(){}))}},{key:"departmentChange",value:function(e){this.setState({departmentId:e.target.value}),console.log(e.target.value)}},{key:"fetchData",value:function(){if(this.state.CallDate)if(this.state.departmentId){var e={departmentId:this.state.departmentId,searchdate:this.state.CallDate};Object(h.E)(e,function(e){var t=this;console.log(e),this.setState({ResponseData:e.data.data},(function(){return t.AgentChatLoginData()}))}.bind(this))}else Object(j.b)("Please choose department",{type:"error"});else Object(j.b)("Please select Date",{type:"error"})}},{key:"AgentChatLoginData",value:function(){var e=this.state.ResponseData,t=[];e.map((function(e,a){e.history.map((function(a,n){var o={username:e.username,LoginTime:a.loginTime,LogoutTime:a.logoutTime};t.push(o)}))})),console.log(t),this.setState({items:t})}},{key:"render",value:function(){var e,t=this,a=this.columnlist,o=this.state,l=o.items,i=(o.PageTitle,o.showModal),s=o.FormTitle;o.formvalue,o.showAlert,o.AlertMsg,o.AlertVarient,o.ModalValueChanged,o.event;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"content"},c.a.createElement(j.a,null),c.a.createElement(O.a,null,c.a.createElement(Y.a,{md:"12"},c.a.createElement(T.a,null,c.a.createElement(L.a,null,c.a.createElement(O.a,null,c.a.createElement(Y.a,{md:4},c.a.createElement(v.a,{col:{config:{root:"livechat_department",cols:{_id:1,name:1},con:{enabled:!0},statename:"",state:!0,Idfield:/_id/g,Displayfield:/name/g}},onChange:this.departmentChange.bind(this)})),c.a.createElement(Y.a,{md:2},c.a.createElement(y,(e={value:new Date,dateFormat:"YYYY-MM-DD"},Object(n.a)(e,"value",this.state.CallDate),Object(n.a)(e,"isValidDate",this.validationdate),Object(n.a)(e,"onChange",(function(e){return t.CallDateChange(e)})),Object(n.a)(e,"utc",!0),Object(n.a)(e,"timeFormat",!1),e))),c.a.createElement(Y.a,{md:1},c.a.createElement(u.a,{variant:"primary",onClick:function(){return t.fetchData()}},"Fetch")),c.a.createElement(Y.a,{md:1}))),c.a.createElement(w.a,null,c.a.createElement(D.a,{columns:a,data:l}))))),c.a.createElement("audio",{src:"",id:"audio1"}),c.a.createElement(d.a,{show:i,onHide:this.handleClose,dialogClassName:"modal-90w"},c.a.createElement(d.a.Header,{closeButton:!0},c.a.createElement(d.a.Title,null,s)),c.a.createElement(d.a.Body,null),c.a.createElement(d.a.Footer,null))))}}]),a}(c.a.Component);t.default=Object(g.b)((function(e){return{CommonData:e.CommonData}}),{GetCommonData:h.g,InsertData:h.y,UpdateData:h.S,addRecord:f.d})(S)}}]);
//# sourceMappingURL=121.06c9110e.chunk.js.map