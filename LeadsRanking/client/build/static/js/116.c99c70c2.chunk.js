(this.webpackJsonpMatrix_Dashboard=this.webpackJsonpMatrix_Dashboard||[]).push([[116],{1265:function(e,t,a){"use strict";a.r(t);var n=a(5),o=a(39),l=a(40),r=a(121),s=a(42),i=a(41),c=a(0),u=a.n(c),m=a(1261),d=a(1262),h=a(1336),v=a(420),b=a(51),f=a.n(b),y=a(61),p=a(425),S=a(30),g=a(431),C=(a(496),a(430)),E=(a(427),a(90)),D=a(530),O=a(424),j=a(531),k=a(533),w=a(563),I=a(532),M=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){var a=n.state.formvalue;n.state.od;e.target&&"checkbox"==e.target.type?a[e.target.id]=e.target.checked:e._isAMomentObject?a[t]=e.format():a[e.target.id]="number"===e.target.type?parseInt(e.target.value):e.target.value,n.setState({formvalue:a,ModalValueChanged:!0})},n.state={isLoaded:!1,showModal:!1,items:[],store:[],activePage:1,root:"SurveyMaster",departmentId:"0",PageTitle:"Agent Survey List",FormTitle:"",formvalue:{},event:"",ModalValueChanged:!1,user:{}},n.departmentchange=n.departmentchange.bind(Object(r.a)(n)),n.handleRemove=n.handleRemove.bind(Object(r.a)(n)),n.handleClose=n.handleClose.bind(Object(r.a)(n)),n.handleShow=n.handleShow.bind(Object(r.a)(n)),n.handleSave=n.handleSave.bind(Object(r.a)(n)),n.selectedrow={SurveyName:"",IsActive:!0},n.columnlist=[{name:"SurveyId",label:"SurveyId",type:"number",searchable:!0,editable:!1},{name:"SurveyName",label:"SurveyName",type:"string",searchable:!0},{name:"Description",label:"Description",type:"textarea",searchable:!0},{name:"IsActive",label:"IsActive",type:"bool"}],n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.GetCommonData({limit:10,skip:0,root:this.state.root,cols:Object(E.a)(this.columnlist,"name"),order:1,c:"L"}),setTimeout(function(){this.setState({user:Object(E.j)()})}.bind(this),500)}},{key:"componentWillReceiveProps",value:function(e){e.CommonData.isError||(this.setState({items:e.CommonData[this.state.root]}),this.setState({store:e.CommonData}))}},{key:"fnDatatableCol",value:function(){var e=this,t=Object(E.e)(this.columnlist);return t.push({name:"Action",cell:function(t){return u.a.createElement(m.a,{"aria-label":"Basic example"},u.a.createElement(d.a,{variant:"secondary",onClick:function(){return e.handleEdit(t)}},u.a.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),u.a.createElement(d.a,{variant:"secondary",onClick:function(){return window.location.href="/admin/AgentSurveyQuestions?sid="+t.SurveyId}},u.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})))}}),t}},{key:"handleRemove",value:function(e){this.props.UpdateData({root:this.state.root,body:{IsActive:!1},querydata:{SurveyId:e.SurveyId},c:"L"},(function(e){Object(C.b)("Survey disabled Successfully!",{type:"success"})})),setTimeout(function(){this.props.GetCommonData({limit:10,skip:0,root:this.state.root,cols:Object(E.a)(this.columnlist,"name"),order:1,c:"L"})}.bind(this),1e3)}},{key:"handleEdit",value:function(e){this.setState({od:Object.assign({},e,{}),formvalue:Object.assign({},e,{}),event:"Edit",showModal:!0,FormTitle:"Edit Survey"})}},{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"handleShow",value:function(){this.setState({formvalue:Object(n.a)({},this.selectedrow),event:"Add",showModal:!0,FormTitle:"Add New Survey"})}},{key:"handleSave",value:function(){if(document.getElementsByName("frmChatAgentConfigure").length>0&&document.getElementsByName("frmChatAgentConfigure")[0].reportValidity()){var e=JSON.parse(JSON.stringify(this.state.formvalue));console.log("formvalue",e),this.fnCleanData(e);var t=e.SurveyId;if(delete e.SurveyId,"Edit"==this.state.event){this.fnCleanData(e);this.props.UpdateData({root:this.state.root,body:e,querydata:{SurveyId:t},c:"L"},(function(e){Object(C.b)("Survey Saved Successfully!",{type:"success"})}))}else e.CreatedOn=f()().format("YYYY-MM-DD HH:mm:ss"),this.props.InsertData({root:this.state.root,body:e},(function(e){200!=e.data.status?C.b.error(e.data.message):Object(C.b)("Survey Added Successfully!",{type:"success"})}));setTimeout(function(){this.props.GetCommonData({limit:10,skip:0,root:this.state.root,cols:Object(E.a)(this.columnlist,"name"),order:1,c:"L"})}.bind(this),1e3),this.setState({showModal:!1})}return!1}},{key:"fnCleanData",value:function(e){}},{key:"departmentchange",value:function(e){}},{key:"render",value:function(){var e=this,t=this.fnDatatableCol(),a=this.state,n=a.items,o=a.PageTitle,l=a.showModal,r=a.FormTitle,s=a.formvalue,i=a.ModalValueChanged,c=a.event;return console.log("renderitems",n),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"content"},u.a.createElement(C.a,null),u.a.createElement(D.a,null,u.a.createElement(O.a,{md:"12"},u.a.createElement(j.a,null,u.a.createElement(k.a,null,u.a.createElement(D.a,null,u.a.createElement(O.a,{md:10},u.a.createElement(w.a,{tag:"h4"},o)),u.a.createElement(O.a,{md:2},u.a.createElement(d.a,{variant:"primary",onClick:this.handleShow},"Add New Survey")))),u.a.createElement(I.a,null,u.a.createElement(g.a,{columns:t,data:n,extention:!0,export:!1,print:!1}))))),u.a.createElement(h.a,{show:l,onHide:this.handleClose,dialogClassName:"modal-90w"},u.a.createElement(h.a.Header,{closeButton:!0},u.a.createElement(h.a.Title,null,r)),u.a.createElement(h.a.Body,null,u.a.createElement(v.a,{name:"frmChatAgentConfigure"},u.a.createElement(D.a,null,this.columnlist.map((function(t){return"SurveyId"!=t.name&&Object(E.f)(t,s,e.handleChange,c)}))))),u.a.createElement(h.a.Footer,null,u.a.createElement(d.a,{variant:"secondary",onClick:this.handleClose},"Close"),u.a.createElement(p.If,{condition:i},u.a.createElement(p.Then,null,u.a.createElement("input",{type:"submit",value:"Save Changes",className:"btn btn-primary",onClick:this.handleSave})))))))}}]),a}(u.a.Component);t.default=Object(S.b)((function(e){return{CommonData:e.CommonData}}),{GetCommonData:y.g,InsertData:y.y,UpdateData:y.S})(M)}}]);
//# sourceMappingURL=116.c99c70c2.chunk.js.map