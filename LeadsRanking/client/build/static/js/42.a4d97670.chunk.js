(this.webpackJsonpMatrix_Dashboard=this.webpackJsonpMatrix_Dashboard||[]).push([[42],{1339:function(e,t,a){"use strict";a.r(t);var n=a(39),s=a(40),i=a(42),r=a(41),l=a(0),c=a.n(l),o=a(61),d=a(124),u=(a(425),a(30)),h=a(431),m=(a(125),a(428)),b=a(514),g=a(1336),f=a(1262),p=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={show:s.props.show,title:s.props.title,message:s.props.message,buttonLabel:s.props.buttonLabel,isLoading:!1},s}return Object(s.a)(a,[{key:"handleClose",value:function(){this.props.onCancel()}},{key:"handleConfirm",value:function(e){this.setState({isLoading:!0}),this.props.onConfirm()}},{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{show:this.state.show,onHide:function(){return e.handleClose()}},c.a.createElement(g.a.Header,null,c.a.createElement(g.a.Title,null,this.state.title)),c.a.createElement(g.a.Body,null,this.state.message),c.a.createElement(g.a.Footer,null,c.a.createElement(f.a,{variant:"primary",onClick:function(){return e.handleConfirm()}},this.state.buttonLabel))))}}]),a}(c.a.Component),O=a(430),v=(a(427),a(90)),C={status:[{status:500,message:"Could Not Initiate the call."},{status:502,message:"Could Not Initiate the call."},{status:403,message:"Bad request, Required Parameter missing."},{status:404,message:"Connect with customer first."},{status:405,message:"Requested Channel / Agent is not on call."},{status:200,message:"Success, Call is being transferred"},{status:101,message:"Customer has disconnected the call."},{status:102,message:"Third Party Agent is not on call, Transfer first."}]},j=a(467),y=a(53),k=a(530),E=a(424),S=a(531),L=a(533),A=a(563),w=a(532),I=(a(458),function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={isLoaded:!1,items:[],AgentData:[],activePage:1,root:"BlockAgent",PageTitle:"Agents List",winactive:0,AgentCode:"",TransferLoader:!1,MergeLoader:!1,UnholdLoader:!1,CallAgentLoader:!1,grade:null,IsBlocked:!1,DIDNo:"",SalesAgentIp:"",IsConCall:!1,IsConferenceSuccussful:!1,ConfirmationOpen:!1,selectedRow:null,highlightTransferBtn:!1,highlightMergeBtn:!1,InitialWarningPopup:!0},s.schdular=null,s.winactive=0,s.StopAgentListSchedular=!1,s.columnlist=[{label:"Agent Code",name:"AgentCode",sortable:!0},{label:"Status",name:"Status",sortable:!0,cell:function(e){return c.a.createElement("div",{className:e.Status.toUpperCase()+" RealtimeStatus"},e.Status.toUpperCase())}},{label:"Agent Name",name:"AgentName",sortable:!0},{label:"Grade",name:"Grade",sortable:!0},{label:"Block",cell:function(e){return c.a.createElement("div",{className:"moreinfo"},"IDLE"==e.Status.toUpperCase()?c.a.createElement("button",{id:"blockagent",className:"btn btn-primary btn-sm",onClick:function(t){return s.showConfirmationModal(t,e)}},"Block"):"")}},{label:"CallAgent",cell:function(e){return c.a.createElement("div",{className:"moreinfo"},"IDLE"==e.Status.toUpperCase()&&Object(v.i)("customernumber")?c.a.createElement("a",{href:"#",onClick:function(t){return s.callAgent(t,e)},id:"agenttoagent",className:"callAgentbtn"},c.a.createElement("i",{className:"fa fa-phone"})," ",s.CheckLoader("callagent")," "):"")}}],s}return Object(s.a)(a,[{key:"componentWillUnmount",value:function(){clearInterval(this.schdular)}},{key:"componentDidMount",value:function(){var e=this;this.columnlist.map((function(t){return Object(v.c)(t,e.props)})),this.savePageLogs(),this.getRealTimeData(),null==this.schdular&&(this.schdular=setInterval(function(){this.StopAgentListSchedular&&this.getRealTimeData()}.bind(this),2500),window.addEventListener("message",function(e){"checkactive"==e.data.type&&(this.setState({winactive:e.data.winactive}),this.winactive=e.data.winactive)}.bind(this)))}},{key:"savePageLogs",value:function(){this.props.addRecord({root:"DashboardLogs",body:{module:this.state.root,url:window.location.href,request:{querystring:this.props.location.search},response:{},on:new Date,by:Object(v.j)().UserID}})}},{key:"recheckAgentStatusBeforeCall",value:function(e){this.state.selectedRow&&this.state.selectedRow.AgentCode==e.AgentCode&&["RINGING","BUSY","CALLINITIATED"].indexOf(e.Status.toUpperCase())>-1&&(O.b.remove(),Object(O.b)("Selected agent is on another call, please block other agent.",{type:"error"}))}},{key:"getRealTimeData",value:function(){this.StopAgentListSchedular=!1;var e=Object(v.i)("campaign"),t=Object(v.i)("transfer_type"),a=Object(v.i)("grade"),n="",s="";["service_to_sales","POD","service_assigned_agent","rmhealthweb","sales_assigned"].indexOf(t)>-1&&(s=Object(v.i)("assignedagent"),n=Object(v.i)("salesagent")),["service_to_salesagent"].indexOf(t)>-1&&(n=Object(v.i)("salesagent")),["POD"].indexOf(t)>-1?Object(o.q)("",e,function(e){var t=[],n=a?a.split(",").map(Number):"";e.data.forEach((function(e){if(n&&n.indexOf(parseInt(e.Grade))>-1)for(var a=0;a<15;a++)t.push(e)})),this.StopAgentListSchedular=!0,this.setState({isLoaded:!0,AgentData:y.a.sortBy(t,(function(e){return parseInt(e.Grade)}))})}.bind(this)):s?Object(o.s)(s,function(e){this.StopAgentListSchedular=!0,this.setState({isLoaded:!0,AgentData:e.data})}.bind(this)):n?Object(o.s)(n,function(e){this.StopAgentListSchedular=!0,this.setState({isLoaded:!0,AgentData:e.data}),e.data&&this.setState({DIDNo:e.data[0].DIDNo,SalesAgentIp:e.data[0].AgentIP})}.bind(this)):e&&Object(o.q)("",e,function(e){var n=Object(v.i)("campaign");if(["transfer_salesservice","sales_to_service"].indexOf(t)>-1&&(["termmax"].indexOf(n)>-1||["termtata"].indexOf(n)>-1||["hdfclife"].indexOf(n)>-1)){var s=[];"null"==a||""==a||0==a?(this.StopAgentListSchedular=!0,this.setState({isLoaded:!0,AgentData:e.data})):(e.data.forEach((function(e){e.Grade==a&&s.push(e)})),this.StopAgentListSchedular=!0,this.setState({isLoaded:!0,AgentData:s}))}else this.StopAgentListSchedular=!0,this.setState({isLoaded:!0,AgentData:e.data})}.bind(this))}},{key:"callAgent",value:function(e,t){this.setState({CallAgentLoader:!0});var a=document.getElementById("agenttoagent");a.classList.add("disabled");var n=Object(v.i)("bookingid"),s=Object(v.i)("agent"),i=Object(v.i)("salesagent"),r=Object(v.i)("serviceagentphn"),l=this.state.DIDNo?this.state.DIDNo:0,c=Object(v.i)("uid"),d=Object(v.i)("serviceserverip"),u=this.state.SalesAgentIp;Object(o.a)(n,s,i,r,l,c,d,u,function(e){a.classList.remove("disabled"),this.setState({CallAgentLoader:!1}),e&&e.data&&200==e.data.status?Object(O.b)(e.data.message,{type:"success"}):Object(O.b)(e.data.message,{type:"error"})}.bind(this))}},{key:"reassignPODLead",value:function(){Object(o.K)({leadId:Object(v.i)("bookingid"),userId:Object(v.i)("u"),assignedUserId:Object(v.i)("assigneduserid")},(function(e){200==e.data.status&&Object(o.N)({type:"notification",event:"chat_notification",text:"Agent ".concat(Object(v.i)("agent")," has passed a POD lead to you, check it out in 'My POD Leads' section."),empID:"".concat(Object(v.i)("assignedagent")),productID:"".concat(Object(v.i)("productid")),link:""},(function(e){}))}))}},{key:"scheduleCallback",value:function(e){["POD"].indexOf(Object(v.i)("transfer_type"))>-1&&localStorage.setItem("ReassignedLead",Object(v.i)("bookingid")),window.parent.postMessage({action:"ScheduleCallback"},"*"),e.stopPropagation(),e.preventDefault()}},{key:"hideConfirmationModal",value:function(){this.setState({ConfirmationOpen:!1,selectedRow:null})}},{key:"showConfirmationModal",value:function(e,t){this.setState({ConfirmationOpen:!0,selectedRow:t})}},{key:"handleConfirmOk",value:function(e){this.blockAgent(e,this.state.selectedRow)}},{key:"blockAgent",value:function(e,t){var a=document.getElementById("transfer");a.classList.add("disabled");var n=document.getElementById("merge"),s=t.AgentCode,i=t.grade,r=Object(v.i)("agent"),l=Object(v.i)("bookingid");i||(i=""),s&&r&&l&&Object(o.O)(r,s,l,i,function(e){a.classList.remove("disabled"),e&&e.data&&200==e.data.status?(this.setState({AgentCode:s,highlightTransferBtn:!0}),n.classList.add("disabled"),Object(O.b)("Agent "+s+" is blocked successfully!!",{type:"success"})):(this.setState({AgentCode:"",selectedRow:null}),Object(O.b)(e.data.message,{type:"error"})),this.setState({IsBlocked:!0,ConfirmationOpen:!1})}.bind(this))}},{key:"clickTransfer",value:function(){var e=document.getElementById("transfer"),t=document.getElementById("merge"),a=(document.getElementById("unhold"),Object(v.i)("grade")),n=Object(v.i)("campaign"),s=Object(v.i)("transfer_type"),i=Object(v.i)("bookingid");if(this.setState({highlightTransferBtn:!1}),["POD"].indexOf(Object(v.i)("transfer_type"))>-1&&localStorage.getItem("ReassignedLead")==i)return Object(O.b)("Lead is already assigned to the agent",{type:"error"}),!1;if((["religarehealth"].indexOf(n)>-1||["starhealth"].indexOf(n)>-1||["maxhealth"].indexOf(n)>-1||["abhihealth"].indexOf(n)>-1)&&0==this.state.IsBlocked)return Object(O.b)("Please block any agent, first!!!",{type:"error"}),!1;if(["transfer_salesservice","sales_to_service"].indexOf(s)>-1&&(["termmax"].indexOf(n)>-1||["termtata"].indexOf(n)>-1||["hdfclife"].indexOf(n)>-1)&&0==this.state.IsBlocked)return Object(O.b)("Please block any agent, first!!!",{type:"error"}),!1;if(["service_to_salesagent"].indexOf(s)>-1&&0==this.state.IsBlocked&&!Object(v.i)("customernumber"))return Object(O.b)("Please block any agent, first!!!",{type:"error"}),!1;this.setState({TransferLoader:!0,grade:a}),e.classList.add("disabled");var r=Object(v.i)("agent"),l=Object(v.i)("thirdpartynumber"),c=Object(v.i)("dtmf_no"),d=Object(v.i)("insurer"),u=Object(v.i)("application_number"),h=Object(v.i)("transfer_agents"),m=Object(v.i)("claimid"),b=Object(v.i)("claim_callid"),g=Object(v.i)("productid"),f=Object(v.i)("salesagent"),p=Object(v.i)("isenc"),j=Object(v.i)("countrycode"),k=Object(v.i)("dialercode");Object(v.i)("campaign");Object(v.i)("customernumber")&&(l=Object(v.i)("customernumber"));var E=this.state.AgentCode;a||(a=""),Object(o.P)(r,l,n,i,s,c,d,u,h,a,E,m,b,g,f,p,j,k,function(e){if(e&&e.data&&e.data.status)if(this.setState({TransferLoader:!1}),t.classList.remove("disabled"),200==e.data.status)Object(O.b)("Success, Call is being transferred",{type:"success"}),this.setState({IsConferenceSuccussful:!0,highlightMergeBtn:!0});else if(["POD"].indexOf(Object(v.i)("transfer_type"))>-1&&405==e.data.status&&"NoIdealAgentAvailable"==e.data.message)Object(O.b)("All agents are busy now, Please set a call back.",{type:"warning"}),this.setState({IsConCall:!0}),this.setState({IsConferenceSuccussful:!1});else{var a=y.a.where(C.status,{status:e.data.status});a.length>0?Object(O.b)(a[0].message,{type:"error"}):Object(O.b)(e.data.message,{type:"error"})}this.setState({TransferData:e.data})}.bind(this))}},{key:"clickMerge",value:function(){var e=document.getElementById("merge");e.classList.add("disabled"),this.setState({MergeLoader:!0,highlightMergeBtn:!1});var t=Object(v.i)("agent");Object(o.z)(t,function(t){t&&t.data&&t.data.status&&(this.setState({MergeLoader:!1}),e.classList.remove("disabled"),200==t.data.status?Object(O.b)(t.data.message,{type:"success"}):Object(O.b)(t.data.message,{type:"error"})),this.setState({MergeData:t.data})}.bind(this))}},{key:"clickUnHold",value:function(){var e=document.getElementById("unhold");document.getElementById("merge");e.classList.add("disabled"),this.setState({UnholdLoader:!0});var t=Object(v.i)("agent");Object(o.Q)(t,function(t){e.classList.remove("disabled"),this.setState({UnholdLoader:!1}),t&&t.data&&t.data.status&&(200==t.data.status?Object(O.b)("Success, Call is Unhold.",{type:"success"}):Object(O.b)(t.data.message,{type:"error"})),this.setState({UnHoldData:t.data})}.bind(this))}},{key:"CheckLoader",value:function(e){if("transfer"==e){if(this.state.TransferLoader)return c.a.createElement(j.a,null)}else if("merge"==e){if(this.state.MergeLoader)return c.a.createElement(j.a,null)}else if("unhold"==e){if(this.state.UnholdLoader)return c.a.createElement(j.a,null)}else if("callagent"==e&&this.state.CallAgentLoader)return c.a.createElement(j.a,null)}},{key:"renderTransferData",value:function(){var e=this;if(["claim_transfer"].indexOf(Object(v.i)("transfer_type"))>-1)var t="Claim Transfer";else t="Service Agent Transfer";Object(v.i)("campaign");var a=4,n=!1;return["POD"].indexOf(Object(v.i)("transfer_type"))>-1&&this.state.IsConCall&&!1===this.state.IsConferenceSuccussful&&(n=!0,a=3),c.a.createElement(k.a,null,c.a.createElement(E.a,{md:"12"},c.a.createElement(S.a,null,c.a.createElement(L.a,null,c.a.createElement(k.a,null,c.a.createElement(E.a,{md:12},c.a.createElement(A.a,{tag:"h5"},c.a.createElement("center",null,t))))),c.a.createElement(w.a,null,c.a.createElement(k.a,null,c.a.createElement(E.a,{md:a},c.a.createElement("button",{id:"transfer",onClick:function(t){return e.clickTransfer()},className:1==this.state.highlightTransferBtn?"btn btn-primary full-width blink":"btn btn-primary full-width"},"Transfer Call ",this.CheckLoader("transfer"))),c.a.createElement(E.a,{md:a},c.a.createElement("button",{id:"merge",onClick:function(t){return e.clickMerge()},className:1==this.state.highlightMergeBtn?"btn btn-primary full-width blink":"btn btn-primary full-width"},"Merge Call ",this.CheckLoader("merge"))),c.a.createElement(E.a,{md:a},c.a.createElement("button",{id:"unhold",onClick:function(t){return e.clickUnHold()},className:"btn btn-primary full-width"},"UnHold ",this.CheckLoader("unhold"))),n&&c.a.createElement(E.a,{md:a},c.a.createElement("button",{id:"scheduleCall",onClick:function(t){return e.scheduleCallback(t)},className:"btn btn-primary full-width"},"Set Call"))),c.a.createElement(k.a,null,c.a.createElement(E.a,{md:12,className:"BlockAgentNoticeMsg"},c.a.createElement("br",null),"Please brief the new advisor with customer details before merging the call into conference."))))))}},{key:"handleInitialWarningPopup",value:function(e){this.setState({InitialWarningPopup:!1})}},{key:"fnDatatableCol",value:function(){return Object(v.e)(this.columnlist)}},{key:"render",value:function(){var e=this,t=this.fnDatatableCol(),a=this.state,n=(a.items,a.PageTitle),s=(a.showModal,a.FormTitle,a.formvalue,a.showAlert),i=a.AlertMsg,r=a.AlertVarient;a.ModalValueChanged,a.event;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"content"},c.a.createElement(O.a,null),c.a.createElement(m.a,{show:s,variant:r,body:i}),this.state.InitialWarningPopup&&c.a.createElement(p,{onConfirm:function(t){return e.handleInitialWarningPopup(t)},onCancel:function(t){return e.handleInitialWarningPopup(t)},buttonLabel:"OK",title:"Confirm",message:"Please make sure you have informed the customer about merging this call with another advisor",show:!0}),this.renderTransferData(),c.a.createElement(k.a,null,c.a.createElement(E.a,{md:"12"},c.a.createElement(S.a,null,c.a.createElement(L.a,null,c.a.createElement(k.a,null,c.a.createElement(E.a,{md:7},c.a.createElement(A.a,{tag:"h5"},n," ",!this.state.isLoaded&&c.a.createElement(j.a,null))))),c.a.createElement(w.a,{className:"BlockAgentContainer"},this.state.ConfirmationOpen&&c.a.createElement(b.a,{onConfirm:function(t){return e.handleConfirmOk(t)},onCancel:function(){return e.hideConfirmationModal()},title:"Confirm",message:"Are you sure you wish to block this agent?",show:!0}),this.state.isLoaded&&c.a.createElement(h.a,{columns:t,data:this.state.AgentData,extention:!1,pagination:!1})))))))}}]),a}(c.a.Component));t.default=Object(u.b)((function(e){return{CommonData:e.CommonData}}),{GetCommonData:o.g,addRecord:d.d})(I)},428:function(e,t,a){"use strict";var n=a(39),s=a(40),i=a(42),r=a(41),l=a(0),c=a.n(l),o=a(440),d=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={show:s.props.show},s}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState({show:e.show}),e.show&&setTimeout(function(){this.setState({show:!1})}.bind(this),5e3)}},{key:"render",value:function(){return this.state.show?c.a.createElement(o.a,{variant:this.props.variant},this.props.body):null}}]),a}(c.a.Component);t.a=d},458:function(e,t,a){},467:function(e,t,a){"use strict";var n=a(0),s=a.n(n);t.a=function(){return s.a.createElement("i",{className:"fa fa-spinner fa-spin"})}},514:function(e,t,a){"use strict";var n=a(39),s=a(40),i=a(42),r=a(41),l=a(0),c=a.n(l),o=a(1336),d=a(1262),u=a(467),h=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={show:s.props.show,title:s.props.title,message:s.props.message,isLoading:!1},s}return Object(s.a)(a,[{key:"handleClose",value:function(){this.props.onCancel()}},{key:"handleConfirm",value:function(e){this.setState({isLoading:!0}),this.props.onConfirm()}},{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,{show:this.state.show,onHide:function(){return e.handleClose()}},c.a.createElement(o.a.Header,{closeButton:!0},c.a.createElement(o.a.Title,null,this.state.title)),c.a.createElement(o.a.Body,null,this.state.message),c.a.createElement(o.a.Footer,null,c.a.createElement(d.a,{variant:"secondary",onClick:function(){return e.handleClose()}},"No"),c.a.createElement(d.a,{variant:"primary",onClick:function(){return e.handleConfirm()},disabled:this.state.isLoading},"Yes"),this.state.isLoading&&c.a.createElement(u.a,null))))}}]),a}(c.a.Component);t.a=h}}]);
//# sourceMappingURL=42.a4d97670.chunk.js.map