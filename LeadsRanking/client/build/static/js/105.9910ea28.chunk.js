(this.webpackJsonpMatrix_Dashboard=this.webpackJsonpMatrix_Dashboard||[]).push([[105],{1296:function(t,e,a){"use strict";a.r(e);var n=a(123),r=a(39),o=a(40),i=a(121),l=a(42),s=a(41),u=a(0),c=a.n(u),d=a(432),h=a(61),m=a(30),f=a(431),p=a(125),g=a(51),C=a.n(g),D=a(428),v=a(430),y=(a(427),a(92)),S=(a(187),a(686)),b=a(53),O=a(530),E=a(424),M=a(531),T=a(533),A=a(563),Y=a(532),w=a(1262),j=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).handleChange=function(t,e){t._isAMomentObject&&n.setState({ReportDate:t.format("YYYY-MM-DD")},(function(){this.fetchCallBackData()}))},n.handleStartDateChange=function(t,e){t._isAMomentObject&&n.setState({startdate:t.format("YYYY-MM-DD")},(function(){}))},n.handleEndDateChange=function(t,e){t._isAMomentObject&&n.setState({enddate:t.format("YYYY-MM-DD")},(function(){}))},n.validation=function(t){return!t.isBefore(C()(n.state.maxdate))},n.validationEndDate=function(t){return t.isBefore(C()(new Date))},n.state={PageTitle:"UnRegistered Chart",UnRegisteredChart:[],ProductId:117,startdate:C()().subtract(1,"days").format("YYYY-MM-DD"),enddate:C()().subtract(1,"days").format("YYYY-MM-DD"),maxdate:C()().subtract(60,"days").format("YYYY-MM-DD"),ReportDate:C()().subtract(0,"days").format("YYYY-MM-DD"),ReportTime:null,SelectedSupervisors:[],ChartData:[],charttype:"ColumnChart"},n.chartchange=n.chartchange.bind(Object(i.a)(n)),n.handleShow=n.handleShow.bind(Object(i.a)(n)),n.columnlist=[{name:"calltime",selector:"calltime",width:"150px"},{name:"callid",selector:"callid"},{name:"agentname",selector:"agentname"},{name:"entertime",selector:"entertime",width:"150px"},{name:"answertime",selector:"answertime",width:"150px"},{name:"hanguptime",selector:"hanguptime",width:"150px"},{name:"callstatus",selector:"callstatus"},{name:"transferedCallid",selector:"transferedCallid"},{name:"product",selector:"product"},{name:"leadid",selector:"leadid"},{name:"mainQueue",selector:"mainQueue"},{name:"mainQueueAgent",selector:"mainQueueAgent"},{name:"mainQueueEnterTime",selector:"mainQueueEnterTime",width:"150px"},{name:"mainQueueAnswerTime",selector:"mainQueueAnswerTime",width:"150px"},{name:"mainQueueHangupTime",selector:"mainQueueHangupTime",width:"150px"},{name:"mainQueueCallStatus",selector:"mainQueueCallStatus"}],n.ProductList={config:{root:"Products",cols:["id AS Id","ProductName AS Display"],con:[{ISActive:!0}]}},n.chartList={config:{root:"chartList",data:[{Id:"BarChart",Display:"BarChart"},{Id:"ColumnChart",Display:"ColumnChart"},{Id:"AreaChart",Display:"AreaChart"},{Id:"LineChart",Display:"LineChart"},{Id:"Bar",Display:"Bar"},{Id:"PieChart",Display:"PieChart"}]}},n}return Object(o.a)(a,[{key:"componentWillMount",value:function(){setTimeout(function(){this.fetchCallBackData()}.bind(this),500)}},{key:"componentWillReceiveProps",value:function(t){t.CommonData.isError||(this.setState({UnRegisteredChart:t.CommonData.unregistered}),this.BindChartData(t.CommonData.unregistered))}},{key:"handleShow",value:function(t){this.setState({ReportTime:new Date,SelectedSupervisors:t.SelectedSupervisors}),setTimeout(function(){this.fetchCallBackData()}.bind(this),500)}},{key:"fetchCallBackData",value:function(){this.state.SelectedSupervisors;this.props.GetMySqlData({root:"unregistered",ProductId:this.state.ProductId,ReportDate:this.state.ReportDate})}},{key:"fetchSQLCallBackData",value:function(){this.state.SelectedSupervisors;this.props.GetCommonData({root:"unregistered",ProductId:this.state.ProductId,startdate:this.state.startdate,enddate:this.state.enddate})}},{key:"chartchange",value:function(t,e){this.setState({charttype:t.target.value})}},{key:"BindChartData",value:function(t){if(t){var e=[],a=[],n=[],r=b.a.groupBy(t,"hour");e.push(["","Total",{role:"annotation"},"Answered",{role:"annotation"},"ABANDON",{role:"annotation"}]),a.push(["","Answered in UnRgsterd Q",{role:"annotation"},"Transferred to Product",{role:"annotation"},"Abandon in Product Queue",{role:"annotation"}]);var o=b.a.groupBy(t,"product"),i=[""];Object.keys(o).forEach((function(t){""!=t&&(i.push(t),i.push({role:"annotation"}))})),n.push(i),Object.keys(r).forEach((function(t){var o,l,s,u,c,d,h,m,f,p,g=b.a.countBy(r[t],(function(t){return"ABANDON"!=t.callstatus})),C=b.a.countBy(r[t],(function(t){return"ABANDON"==t.callstatus}));e.push([t,r[t].length,r[t].length,null!==(o=g.true)&&void 0!==o?o:0,null!==(l=g.true)&&void 0!==l?l:0,null!==(s=C.true)&&void 0!==s?s:0,null!==(u=C.true)&&void 0!==u?u:0]);var D=b.a.countBy(r[t],(function(t){return""!=t.product})),v=b.a.countBy(r[t],(function(t){return"ABANDON"==t.mainQueueCallStatus&&""!=t.product}));a.push([t,null!==(c=g.true)&&void 0!==c?c:0,null!==(d=g.true)&&void 0!==d?d:0,null!==(h=D.true)&&void 0!==h?h:0,null!==(m=D.true)&&void 0!==m?m:0,null!==(f=v.true)&&void 0!==f?f:0,null!==(p=v.true)&&void 0!==p?p:0]);for(var y=[t],S=1;S<i.length;S++)y.push(0);n.push(y)})),Object.keys(o).forEach((function(t){if(""!=t){var e=b.a.groupBy(o[t],"hour");Object.keys(e).forEach((function(a){for(var r=1;r<n.length;r++)if(n[r][0]==a){var o=i.indexOf(t);n[r][o]=e[a].length,n[r][o+1]=e[a].length}}))}})),this.setState({ChartData:e,TransferToAgent:a,FinalData:n})}}},{key:"CreateChart",value:function(t,e){if(t&&t.length>0)return c.a.createElement(S.a,{chartType:this.state.charttype,data:t,loader:c.a.createElement("div",null,"Loading Chart"),width:"100%",height:"200px",options:{title:e,is3D:!0,chartArea:{width:"80%"},hAxis:{title:t[0][0],minValue:0},vAxis:{title:"Total",minValue:0},bar:{groupWidth:"80%"},legend:{position:"bottom"},animation:{startup:!0,easing:"linear",duration:1e3}},legendToggle:!0})}},{key:"render",value:function(){var t,e,a=this,r=this.columnlist,o=this.state,i=(o.items,o.PageTitle),l=o.UnRegisteredChart,s=o.showAlert,u=o.AlertMsg,d=o.AlertVarient,h=(o.ReportTime,this.CreateChart(this.state.ChartData,"Hourly Call Flow - UnRegistered Queue")),m=this.CreateChart(this.state.TransferToAgent,"Call Transfer");console.log(this.state.FinalData);var g=this.CreateChart(this.state.FinalData,"Product Wise - Transfer");return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"content"},c.a.createElement(D.a,{show:s,variant:d,body:u}),c.a.createElement(v.a,null),c.a.createElement(O.a,null,c.a.createElement(E.a,{md:"12"},c.a.createElement(M.a,null,c.a.createElement(T.a,null,c.a.createElement(O.a,null,c.a.createElement(E.a,{md:3},c.a.createElement(A.a,{tag:"h4"},i)),c.a.createElement(E.a,{md:2},c.a.createElement(p.a,{value:this.state.charttype,col:this.chartList,onChange:this.chartchange})),c.a.createElement(E.a,{md:2},c.a.createElement(y,(t={value:new Date,dateFormat:"YYYY-MM-DD"},Object(n.a)(t,"value",this.state.startdate),Object(n.a)(t,"isValidDate",this.validation),Object(n.a)(t,"onChange",(function(t){return a.handleStartDateChange(t)})),Object(n.a)(t,"utc",!0),Object(n.a)(t,"timeFormat",!1),t))),c.a.createElement(E.a,{md:2},c.a.createElement(y,(e={value:new Date,dateFormat:"YYYY-MM-DD"},Object(n.a)(e,"value",this.state.enddate),Object(n.a)(e,"isValidDate",this.validationEndDate),Object(n.a)(e,"onChange",(function(t){return a.handleEndDateChange(t)})),Object(n.a)(e,"utc",!0),Object(n.a)(e,"timeFormat",!1),e))),c.a.createElement(E.a,{md:3},c.a.createElement(w.a,{variant:"primary",onClick:function(){return a.fetchSQLCallBackData()}},"Fetch"),"\xa0",c.a.createElement(w.a,{variant:"primary",onClick:function(){return a.fetchCallBackData()}},"Today")))),c.a.createElement(Y.a,null,c.a.createElement(O.a,null,c.a.createElement(E.a,{md:"6"},h),c.a.createElement(E.a,{md:"6"},m),c.a.createElement(E.a,{md:"12"},g)),c.a.createElement(f.a,{columns:r,data:l&&l.length>0?l:[]})))))))}}]),a}(c.a.Component);e.default=Object(m.b)((function(t){return{CommonData:t.CommonData}}),{GetMySqlData:d.b,GetCommonData:h.g,GetCommonspData:h.h})(j)},428:function(t,e,a){"use strict";var n=a(39),r=a(40),o=a(42),i=a(41),l=a(0),s=a.n(l),u=a(440),c=function(t){Object(o.a)(a,t);var e=Object(i.a)(a);function a(t){var r;return Object(n.a)(this,a),(r=e.call(this,t)).state={show:r.props.show},r}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(t){this.setState({show:t.show}),t.show&&setTimeout(function(){this.setState({show:!1})}.bind(this),5e3)}},{key:"render",value:function(){return this.state.show?s.a.createElement(u.a,{variant:this.props.variant},this.props.body):null}}]),a}(s.a.Component);e.a=c},432:function(t,e,a){"use strict";a.d(e,"b",(function(){return u})),a.d(e,"c",(function(){return c})),a.d(e,"d",(function(){return d})),a.d(e,"a",(function(){return h}));var n=a(4),r=a.n(n),o=a(1),i=a(9),l=function(t){return t.dataToSend.state&&t.dataToSend.statename&&localStorage.setItem(t.dataToSend.statename,JSON.stringify(t.data)),{type:i.a.GET_COMMON_SUCCESS,payload:t.data,root:t.dataToSend.root}},s=function(t){return{type:i.a.GET_COMMON_FAIL,payload:t}},u=function(t,e){if(null!=t.data||void 0!=t.data)return function(e,a){e(l({data:t.data,dataToSend:t}))};try{if(t.state&&localStorage.getItem(t.statename)||localStorage.getItem(t.statename))return function(e,a){var n=JSON.parse(localStorage.getItem(t.statename));e(l({data:n,dataToSend:t}))}}catch(a){}return function(a,n){r.a.get(o.a.api.base_url+"/mydb/list/",{params:t}).then((function(n){t.state&&t.statename&&localStorage.setItem(t.statename,JSON.stringify(n.data.data)),e&&e(n),a(l({data:n.data.data[0],dataToSend:t}))})).catch((function(t){a(s(t))}))}},c=function(t,e){return function(a,n){r.a.post(o.a.api.base_url+"/mydb/insert/",{data:t}).then((function(t){var n;e&&e(t),a((n={data:t.data},{type:i.a.INSERT_COMMON_SUCCESS,payload:n.data}))})).catch((function(t){a(function(t){return{type:i.a.INSERT_COMMON_FAIL,payload:t}}(t))}))}},d=function(t,e){return function(a,n){r.a.post(o.a.api.base_url+"/mydb/update/",{data:t}).then((function(t){var n;e&&e(t),a((n={data:t.data},{type:i.a.UPDATE_COMMON_SUCCESS,payload:n.data}))})).catch((function(t){a(function(t){return{type:i.a.UPDATE_COMMON_FAIL,payload:t}}(t))}))}},h=function(t,e){try{if(t.state&&localStorage.getItem(t.statename)||localStorage.getItem(t.statename)){var a=JSON.parse(localStorage.getItem(t.statename));return void e(a)}}catch(n){}r.a.get(o.a.api.base_url+"/mydb/list/",{params:t}).then((function(a){t.state&&t.statename&&localStorage.setItem(t.statename,JSON.stringify(a.data.data)),e(a.data.data)})).catch((function(t){}))}}}]);
//# sourceMappingURL=105.9910ea28.chunk.js.map