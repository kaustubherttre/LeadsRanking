{"version":3,"sources":["views/UserCallDetails.jsx","../node_modules/react-if/lib/ReactIf.js"],"names":["UserCallDetails","props","validationdate","currentDate","isBefore","moment","state","maxdate","isLoaded","showModal","items","store","activePage","root","PageTitle","FormTitle","formvalue","event","ModalValueChanged","user","prolist","agentranklist","leadranklist","empid","leadid","CallDate","format","subtract","AwsRecordingUrl","RecordingName","addClass","callid","handleClose","bind","handleShow","empchange","leadchange","selectedrow","columnlist","name","label","alias","type","hide","width","cell","row","className","id","CallDataId","onClick","e","CreateRecordingURL","class","this","map","col","fnBindRootData","setTimeout","setState","getuser","nextProps","CommonData","config","joinObject","isError","fnBindStore","recordtype","play","number","console","log","extension","audio","document","getElementById","paused","calldataid","innerHTML","GetRecordingName","results","CheckFile","data","agent_file","customer_file","file_available","GetAwsRecordingUrl","record","status","src","onloadedmetadata","duration","onended","pause","currentTime","fnDatatableCol","Object","assign","od","target","value","_isAMomentObject","condition","push","GetCommonData","limit","skip","cols","GetJsonToArray","c","con","toast","columns","showAlert","AlertMsg","AlertVarient","md","Control","onChange","placeholder","callIdchange","Date","dateFormat","CallDateChange","variant","fetchData","show","onHide","dialogClassName","Header","closeButton","Title","Body","Footer","React","Component","connect","InsertData","UpdateData","addRecord","define","_exports","_propTypes","_react","_interopRequireDefault","obj","__esModule","render","children","createElement","Fragment","getConditionResult","Then","Else","If","_ref","conditionResult","concat","find","defineProperty","Unless","When","Case","Default","Switch","propTypes","oneOfType","func","node","ThenOrElse","instanceOf","_ref2","_ref3","_ref4","matchingCase","defaultCase","Children","forEach","child","isValidElement","bool","isRequired","arrayOf","defaultProps","CaseOrDefault","_default"],"mappings":"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","file":"static/js/100.2dd55b10.chunk.js","sourcesContent":["\r\nimport React from \"react\";\r\nimport { ButtonGroup, Button, Modal, Form } from 'react-bootstrap';\r\n\r\nimport {\r\n  GetCommonData, InsertData, UpdateData, GetFileExists, GetAwsRecordingUrl, GetRecordingName\r\n} from \"../store/actions/CommonAction\";\r\nimport {\r\n  addRecord\r\n} from \"../store/actions/CommonMongoAction\";\r\n\r\nimport { If, Then } from 'react-if';\r\n//import { If, Then, Else, When, Unless, Switch, Case, Default } from 'react-if';\r\n\r\nimport { connect } from \"react-redux\";\r\n// import { Link } from \"react-router-dom\";\r\nimport DataTable from './Common/DataTableWithFilter';\r\nimport DropDown from './Common/DropDownList';\r\n\r\nimport Moment from 'react-moment';\r\nimport moment from 'moment';\r\n\r\nimport * as Datetime from 'react-datetime';\r\nimport 'react-datetime/css/react-datetime.css';\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport { CompareJson, fnBindRootData, fnRenderfrmControl, fnDatatableCol, fnCleanData, GetJsonToArray, getMax, joinObject } from '../utility/utility.jsx';\r\n// reactstrap components\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  CardBody,\r\n  CardTitle,\r\n  Table,\r\n  Row,\r\n  Col\r\n} from \"reactstrap\";\r\nimport { getuser } from \"utility/utility\";\r\n\r\nclass UserCallDetails extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoaded: false,\r\n      showModal: false,\r\n      items: [],\r\n      store: [],\r\n      activePage: 1,\r\n      root: \"UserCallDetails\",\r\n      PageTitle: \"User Call Details\",\r\n      FormTitle: \"\",\r\n      formvalue: {},\r\n      event: \"\",\r\n      ModalValueChanged: false,\r\n      user: {},\r\n      prolist: '',\r\n      agentranklist: '',\r\n      leadranklist: '',\r\n      empid: '',\r\n      leadid: '',\r\n      CallDate: moment().format(\"YYYY-MM-DD\"),\r\n      maxdate: moment().subtract(59, 'days').format(\"YYYY-MM-DD\"),\r\n      AwsRecordingUrl: '',\r\n      RecordingName: '',\r\n      addClass: \"fa fa-play-circle\",\r\n      callid: '',\r\n      //selectedrow: { \"Id\": 1, \"type\": \"Job\", \"alerttitle\": \"Mongoquery2\", \"querytype\": \"MongoQuery\", \"databasename\": \"mydb\", \"collection\": \"movie\", \"dbserver\": \"Replica\", \"tomail\": \"jitendras@policybazaar.com,Ayush@policybazaar.com\", \"tomobile\": \"99688436\", \"count\": 4, \"operation\": \"lt\", \"starttime\": \"1970-01-01T10:28:04.000Z\", \"frequency\": 120, \"IsActive\": false, \"reporttype\": null, \"endtime\": \"1970-01-01T10:28:04.000Z\", \"nextruntime\": \"2019-11-29T11:20:00.960Z\", \"createddate\": null, \"createdby\": \"deepankar\", \"updateddate\": null, \"updatedby\": null, \"ExcelSheetNames\": \"BaseData,Health,Term,Investment,Motor,EMAILBODY,EMAILBODY\", \"querysource\": \"{$query:{name:\\\"garvitjain\\\",count:{$lt:6}}}\", \"ccmail\": null, \"bccmail\": null, \"frommail\": null }\r\n    };\r\n    this.handleClose = this.handleClose.bind(this);\r\n    this.handleShow = this.handleShow.bind(this);\r\n\r\n    this.empchange = this.empchange.bind(this);\r\n    this.leadchange = this.leadchange.bind(this);\r\n    this.selectedrow = { \"CallDataId\": 0, \"CallID\": null, \"LeadID\": null }\r\n    this.columnlist = [\r\n      {\r\n        name: \"CDH.CallDataId\",\r\n        label: \"CallDataId\",\r\n        alias: \"calldataid\",\r\n        type: \"hidden\",\r\n        hide: true,\r\n      },\r\n      {\r\n        name: \"CDH.callid\",\r\n        label: \"callid\",\r\n        alias: \"callid\",\r\n        type: \"hidden\",\r\n        hide: true,\r\n      },\r\n      {\r\n        name: \"UD.EmployeeId\",\r\n        label: \"EmployeeId\",\r\n        alias: \"empid\",\r\n        type: \"string\",\r\n      },\r\n      {\r\n        name: \"CDH.LeadID\",\r\n        label: \"LeadID\",\r\n        alias: \"leadid\",\r\n        type: \"string\",\r\n      },\r\n      {\r\n        name: \"CallDate\",\r\n        label: \"CallDate\",\r\n        type: \"datetime\",\r\n        width: \"150px\",\r\n      },\r\n      {\r\n        name: \"CDH.Duration\",\r\n        label: \"Duration\",\r\n        alias: \"duration\",\r\n        type: \"number\"\r\n      },\r\n      {\r\n        name: \"CDH.talktime\",\r\n        label: \"talktime\",\r\n        alias: \"talktime\",\r\n        type: \"number\"\r\n      },\r\n      {\r\n        name: \"CDH.CallType\",\r\n        label: \"CallType\",\r\n        alias: \"calltype\",\r\n        type: \"string\"\r\n      },\r\n      {\r\n        name: \"CDH.Disposition\",\r\n        label: \"Disposition\",\r\n        alias: \"disposition\",\r\n        type: \"string\"\r\n      },\r\n      {\r\n        name: \"CDH.Context\",\r\n        label: \"Context\",\r\n        alias: \"context\",\r\n        type: \"string\"\r\n      },\r\n      {\r\n        name: \"CDH.CallDataId\",\r\n        label: \"AgentListen\",\r\n        alias: \"CallDataId\",\r\n        cell: row =>\r\n          <div className=\"listenUserDetails\">\r\n            <span id={\"span_agent\" + row.CallDataId} onClick={(e) => this.CreateRecordingURL(e, row, 'agent')}>\r\n              <i class=\"fa fa-play-circle listen\"></i>\r\n            </span>\r\n          </div>\r\n      },\r\n      {\r\n        name: \"CDH.CallDataId\",\r\n        label: \"CustomerListen\",\r\n        alias: \"CallDataId\",\r\n        cell: row =>\r\n          <div className=\"listenUserDetails\">\r\n            <span id={\"span_customer\" + row.CallDataId} onClick={(e) => this.CreateRecordingURL(e, row, 'customer')}>\r\n              <i class=\"fa fa-play-circle listen\"></i>\r\n            </span>\r\n          </div>\r\n      },\r\n      {\r\n        name: \"CDH.CallDataId\",\r\n        label: \"CombinedListen\",\r\n        alias: \"CallDataId\",\r\n        cell: row =>\r\n          <div className=\"listenUserDetails\">\r\n            <span id={\"span_combined\" + row.CallDataId} onClick={(e) => this.CreateRecordingURL(e, row, 'combined')}>\r\n              <i class=\"fa fa-play-circle listen\"></i>\r\n            </span>\r\n          </div>\r\n      }\r\n\r\n    ];\r\n    let count = 0;\r\n  }\r\n\r\n\r\n\r\n  componentDidMount() {\r\n\r\n    this.columnlist.map(col => (\r\n      fnBindRootData(col, this.props)\r\n    ));\r\n\r\n    setTimeout(function () {\r\n      this.setState({ user: getuser() });\r\n    }.bind(this), 500);\r\n\r\n  }\r\n\r\n  fnBindStore(col, nextProps) {\r\n    if (col.type == \"dropdown\") {\r\n      let items;\r\n      if (nextProps.CommonData[this.state.root] && nextProps.CommonData[col.config.root]) {\r\n        items = joinObject(nextProps.CommonData[this.state.root], nextProps.CommonData[col.config.root], col.name)\r\n        this.setState({ items: items });\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n\r\n    if (!nextProps.CommonData.isError) {\r\n      this.setState({ items: nextProps.CommonData[this.state.root] });\r\n      this.setState({ store: nextProps.CommonData });\r\n      this.columnlist.map(col => (\r\n        this.fnBindStore(col, nextProps)\r\n      ));\r\n    }\r\n  }\r\n\r\n  CreateRecordingURL(e, row, recordtype) {\r\n    //debugger;\r\n\r\n    //let url = \"http://20.80.10.88:8080/api/v1/db/awsfile?key=PW21900-659064683-192039657-20200517-000006.wav\";\r\n    this.play(row.CallDataId, row, recordtype);\r\n\r\n    //debugger;\r\n\r\n\r\n  }\r\n\r\n  play(number, row, recordtype) {\r\n    debugger;\r\n    console.log(recordtype);\r\n    var extension = '';\r\n    if(recordtype == 'agent'){\r\n      extension = '-out.wav';\r\n    }else if(recordtype == 'customer'){\r\n      extension = '-in.wav';\r\n    }else if(recordtype == 'combined'){\r\n      extension = '.wav';\r\n    }\r\n    var audio = document.getElementById('audio1');\r\n    //var icon = document.getElementById(\"play\" + number);\r\n    if (audio.paused) {\r\n\r\n      let calldataid = row.callid;\r\n      this.state.AwsRecordingUrl = '';\r\n      document.getElementById('span_'+ recordtype + number).innerHTML = '<i class=\"fa fa-spinner fa-spin\"></i>';\r\n      //debugger;\r\n      GetRecordingName(calldataid, function (results) {\r\n        //console.log(\"results\", results);   \r\n        var CheckFile = '';\r\n        if(recordtype == 'agent'){\r\n          CheckFile = results.data.agent_file;\r\n        }else if(recordtype == 'customer'){\r\n          CheckFile = results.data.customer_file;\r\n        }else if(recordtype == 'combined'){\r\n          CheckFile = results.data.file_available;\r\n        }\r\n\r\n        if (CheckFile == true) {\r\n          //this.setState({ RecordingName: results.data.record });\r\n          GetAwsRecordingUrl(results.data.record+extension, 'newcctecbuckt', function (results) {\r\n            //debugger;\r\n            console.log(\"results\", results);\r\n            if (results.data.status == 200) {\r\n              this.setState({ AwsRecordingUrl: results.data.data });\r\n              audio.src = results.data.data;\r\n              document.getElementById('span_'+ recordtype + number).innerHTML = '<i class=\"fa fa-spinner fa-spin\"></i>';\r\n\r\n              audio.onloadedmetadata = function() {\r\n                console.log(audio.duration)\r\n                //setTimeout(function () {\r\n                  audio.play();\r\n                  console.log(audio.duration);\r\n                  if(audio.paused == false && audio.duration > 0 && audio.duration != 'Infinity' && audio.duration != 'NaN'){\r\n                  document.getElementById('span_'+ recordtype + number).innerHTML = '<i class=\"fa fa-stop-circle listen\"></i>';\r\n                 \r\n                  audio.onended = function() {\r\n                    document.getElementById('span_'+ recordtype + number).innerHTML = '<i class=\"fa fa-play-circle listen\"></i>';\r\n                  };\r\n                 \r\n                  }else{\r\n                  document.getElementById('span_'+ recordtype + number).innerHTML = 'No File Found'; \r\n                  }\r\n               // }.bind(this), 500);\r\n              };\r\n              \r\n            } else {\r\n              document.getElementById('span_'+ recordtype + number).innerHTML = 'No File Found';\r\n            }\r\n          }.bind(this));\r\n        } else {\r\n          document.getElementById('span_'+ recordtype + number).innerHTML = 'No File Name Found';\r\n        }\r\n\r\n      }.bind(this));\r\n\r\n    } else {\r\n      //debugger;\r\n      audio.pause();\r\n      audio.currentTime = 0;\r\n      document.getElementById('span_'+ recordtype + number).innerHTML = '<i class=\"fa fa-play-circle listen\"></i>';\r\n\r\n      //debugger;\r\n    }\r\n  }\r\n\r\n  fnDatatableCol() {\r\n\r\n    var columns = fnDatatableCol(this.columnlist);\r\n\r\n    // columns.push({\r\n    //   name: \"Products Name\",\r\n    //   selector: \"ProductID_display\",\r\n    //   sortable: true,\r\n    // });\r\n\r\n    // columns.push({\r\n    //   name: \"Action\",\r\n    //   cell: row => <ButtonGroup aria-label=\"Basic example\">\r\n    //     <Button variant=\"secondary\" onClick={() => this.handleCopy(row)}><i className=\"fa fa-files-o\" aria-hidden=\"true\"></i></Button>\r\n    //     <Button variant=\"secondary\" onClick={() => this.handleEdit(row)}><i className=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i></Button>\r\n    //   </ButtonGroup>\r\n    // });\r\n    return columns;\r\n  }\r\n  handleCopy(row) {\r\n    this.setState({ formvalue: Object.assign({}, row, {}), event: \"Copy\", showModal: true, FormTitle: \"Copy Record\" });\r\n  }\r\n  handleEdit(row) {\r\n    this.setState({ od: Object.assign({}, row, {}), formvalue: Object.assign({}, row, {}), event: \"Edit\", showModal: true, FormTitle: \"Edit Record\" });\r\n  }\r\n  handleClose() {\r\n    this.setState({ showModal: false });\r\n  }\r\n  handleShow() {\r\n    this.setState({ formvalue: this.selectedrow, event: \"Add\", showModal: true, FormTitle: \"Add New Record\" });\r\n  }\r\n\r\n\r\n  empchange(e, props) {\r\n    this.setState({ empid: e.target.value });\r\n  }\r\n  leadchange(e, props) {\r\n    this.setState({ leadid: e.target.value });\r\n  }\r\n  callIdchange(e, props) {\r\n    this.setState({ callid: e.target.value });\r\n  }\r\n  CallDateChange(e, props) {\r\n    if (e._isAMomentObject) {\r\n      this.setState({ CallDate: e.format(\"YYYY-MM-DD\") }, function () {\r\n      });\r\n    }\r\n  }\r\n  fetchData() {\r\n    console.log(this.state.leadid + this.state.empid);\r\n    let condition = [];\r\n    if (this.state.leadid != '') {\r\n      condition.push({ \"CDH.LeadID\": this.state.leadid })\r\n    }\r\n    if (this.state.callid != '') {\r\n      condition.push({ \"CDH.CallID\": this.state.callid })\r\n    }\r\n    if (this.state.empid != '') {\r\n      condition.push({ \"UD.EmployeeId\": this.state.empid })\r\n    }\r\n    // else{\r\n    //   toast(\"Please enter Employee Id\", { type: 'error' });\r\n    //   return;\r\n    // }\r\n    if (this.state.CallDate != '') {\r\n      condition.push({ \"CDH.CallDate\": this.state.CallDate })\r\n    }\r\n    else{\r\n      toast(\"Please select Date\", { type: 'error' });\r\n      return;\r\n    }\r\n\r\n\r\n    this.props.GetCommonData({\r\n      limit: 10,\r\n      skip: 0,\r\n      root: this.state.root,\r\n      cols: GetJsonToArray(this.columnlist, \"name\"),\r\n      c: \"L\",\r\n      con: condition,\r\n      //con: [{ \"CDH.LeadID\": this.state.leadid }],\r\n    });\r\n  }\r\n\r\n  validationdate = (currentDate) => {\r\n    return !currentDate.isBefore(moment(this.state.maxdate));\r\n  };\r\n\r\n  render() {\r\n    const columns = this.fnDatatableCol();\r\n    const { items, PageTitle, showModal, FormTitle, formvalue, showAlert, AlertMsg, AlertVarient, ModalValueChanged, event } = this.state;\r\n    return (\r\n      <>\r\n        <div className=\"content\">\r\n          <ToastContainer />\r\n          <Row>\r\n            <Col md=\"12\">\r\n              <Card>\r\n                <CardHeader>\r\n                  <Row>\r\n                    {/* <Col md={4}>\r\n                      <CardTitle tag=\"h4\">{PageTitle}</CardTitle>\r\n                    </Col> */}\r\n                    <Col md={2}>\r\n                      <Form.Control type=\"text\" onChange={this.empchange} placeholder={\"Enter EmployeeId\"} />\r\n                    </Col>\r\n                    <Col md={2}>\r\n                      <Form.Control type=\"text\" onChange={this.leadchange} placeholder={\"Enter LeadId\"} />\r\n                    </Col>\r\n                    <Col md={2}>\r\n                      <Form.Control type=\"text\" onChange={this.callIdchange.bind(this)} placeholder={\"Enter CallId\"} />\r\n                    </Col>\r\n                    <Col md={2}>\r\n                      <Datetime value={new Date()}\r\n                        dateFormat=\"YYYY-MM-DD\"\r\n                        value={this.state.CallDate}\r\n                        isValidDate={this.validationdate}\r\n                        onChange={moment => this.CallDateChange(moment)}\r\n                        utc={true}\r\n                        timeFormat={false} />\r\n\r\n                    </Col>\r\n                    <Col md={1}>\r\n                      <Button variant=\"primary\" onClick={() => this.fetchData()}>Fetch</Button>\r\n                    </Col>\r\n                    <Col md={1}>\r\n                    </Col>\r\n                  </Row>\r\n                </CardHeader>\r\n                <CardBody>\r\n                  <DataTable\r\n                    columns={columns}\r\n                    data={items}\r\n                  />\r\n                </CardBody>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n          <audio src=\"\" id={\"audio1\"}></audio>\r\n          <Modal show={showModal} onHide={this.handleClose} dialogClassName=\"modal-90w\">\r\n            <Modal.Header closeButton>\r\n              <Modal.Title>{FormTitle}</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n\r\n            </Modal.Footer>\r\n          </Modal>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    CommonData: state.CommonData\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  {\r\n    GetCommonData,\r\n    InsertData,\r\n    UpdateData,\r\n    addRecord\r\n  }\r\n)(UserCallDetails);","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"exports\", \"prop-types\", \"react\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require(\"prop-types\"), require(\"react\"));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.propTypes, global.react);\n    global.ReactIf = mod.exports;\n  }\n})(this, function (_exports, _propTypes, _react) {\n  \"use strict\";\n\n  Object.defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n  _exports.Then = Then;\n  _exports.Else = Else;\n  _exports.If = If;\n  _exports.Unless = Unless;\n  _exports.When = When;\n  _exports.Case = Case;\n  _exports.Default = Default;\n  _exports.Switch = Switch;\n  _exports[\"default\"] = void 0;\n  _propTypes = _interopRequireDefault(_propTypes);\n  _react = _interopRequireDefault(_react);\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n  function render(props) {\n    if (typeof props.children === \"function\") {\n      return _react[\"default\"].createElement(_react[\"default\"].Fragment, null, props.children());\n    }\n\n    return _react[\"default\"].createElement(_react[\"default\"].Fragment, null, props.children || null);\n  }\n\n  function getConditionResult(condition) {\n    var conditionResult = !!(typeof condition === 'function' ? condition() : condition);\n    return conditionResult;\n  }\n\n  function Then(props) {\n    return render(props);\n  }\n\n  function Else(props) {\n    return render(props);\n  }\n\n  Then.propTypes = Else.propTypes = {\n    children: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].func, _propTypes[\"default\"].node])\n  };\n\n  function If(_ref) {\n    var condition = _ref.condition,\n        children = _ref.children;\n\n    if (children == null) {\n      return null;\n    }\n\n    var conditionResult = getConditionResult(condition);\n    return _react[\"default\"].createElement(_react[\"default\"].Fragment, null, [].concat(children).find(function (c) {\n      return c.type !== _react[\"default\"].createElement(Else, null).type ^ !conditionResult;\n    }) || null);\n  }\n\n  var ThenOrElse = _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].instanceOf(Then), _propTypes[\"default\"].instanceOf(Else), _propTypes[\"default\"].node]);\n\n  If.propTypes = {\n    condition: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].func, _propTypes[\"default\"].bool]).isRequired,\n    children: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].arrayOf(ThenOrElse), ThenOrElse])\n  };\n\n  function Unless(_ref2) {\n    var condition = _ref2.condition,\n        children = _ref2.children;\n    var conditionResult = !!getConditionResult(condition);\n    return !conditionResult && children ? render({\n      condition: condition,\n      children: children\n    }) : null;\n  }\n\n  Unless.propTypes = {\n    condition: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].func, _propTypes[\"default\"].bool]).isRequired,\n    children: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].func, _propTypes[\"default\"].node])\n  };\n  Unless.defaultProps = {\n    children: null\n  };\n\n  function When(_ref3) {\n    var condition = _ref3.condition,\n        children = _ref3.children;\n    var conditionResult = getConditionResult(condition);\n    return conditionResult && children ? render({\n      condition: condition,\n      children: children\n    }) : null;\n  }\n\n  When.propTypes = {\n    condition: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].func, _propTypes[\"default\"].bool]).isRequired,\n    children: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].func, _propTypes[\"default\"].node])\n  };\n  When.defaultProps = {\n    children: null\n  };\n\n  function Case(props) {\n    return render(props);\n  }\n\n  Case.propTypes = {\n    condition: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].func, _propTypes[\"default\"].bool]).isRequired,\n    children: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].func, _propTypes[\"default\"].node])\n  };\n  Case.defaultProps = {\n    children: null\n  };\n\n  function Default(props) {\n    return render(props);\n  }\n\n  Default.propTypes = {\n    children: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].func, _propTypes[\"default\"].node])\n  };\n  Default.defaultProps = {\n    children: null\n  };\n\n  function Switch(_ref4) {\n    var children = _ref4.children;\n    // -- Inspired from react-router --\n    // We use React.Children.forEach instead of React.Children.toArray().find()\n    // here because toArray adds keys to all child elements and we do not want\n    // to trigger an unmount/remount for two children <Case>s or <Default>s\n    var matchingCase;\n    var defaultCase;\n\n    _react[\"default\"].Children.forEach(children, function (child) {\n      // not a valid react child, don't add it\n      if (!_react[\"default\"].isValidElement(child)) {\n        return;\n      }\n\n      if (!matchingCase && child.type === Case) {\n        var condition = child.props.condition;\n        var conditionResult = getConditionResult(condition);\n\n        if (conditionResult) {\n          matchingCase = child;\n        } // else not matching condition, don't add it\n\n      } else if (!defaultCase && child.type === Default) {\n        defaultCase = child;\n      } // else unknown type, don't add it\n\n    });\n\n    return matchingCase || defaultCase || null;\n  }\n\n  var CaseOrDefault = _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].instanceOf(Case), _propTypes[\"default\"].instanceOf(Default), _propTypes[\"default\"].node]);\n\n  Switch.propTypes = {\n    children: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].arrayOf(CaseOrDefault), CaseOrDefault])\n  };\n  Switch.defaultProps = {\n    children: null\n  };\n  If.Then = Then;\n  If.Else = Else;\n  If.When = When;\n  If.Unless = Unless;\n  If.Switch = Switch;\n  If.Case = Case;\n  If.Default = Default;\n  var _default = If;\n  _exports[\"default\"] = _default;\n});"],"sourceRoot":""}