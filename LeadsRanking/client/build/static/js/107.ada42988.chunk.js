(this.webpackJsonpMatrix_Dashboard=this.webpackJsonpMatrix_Dashboard||[]).push([[107],{1294:function(e,t,a){"use strict";a.r(t);var n=a(39),s=a(40),l=a(121),o=a(42),c=a(41),r=a(0),i=a.n(r),d=a(61),u=a(30),m=a(90),h=a(431),p=a(441),g=a(91),f=a.n(g),b=a(425),k=a(428),v=a(430),E=(a(427),a(530)),S=a(424),C=a(531),y=a(533),A=a(563),w=a(532),I=a(1336),D=a(420),O=a(1262),T=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={PageTitle:"CallBack Tracker",CallBackTracker:[],showAssignLeadPopUp:!1,SelectedAgentAssigTo:0,SelectedRow:null,hideAssign:!0,ReportTime:null,SelectedSupervisors:[],SelectedRows:[],clearSelected:!1},s.dtRef=i.a.createRef(),s.handleShow=s.handleShow.bind(Object(l.a)(s)),s.columnlist=[{name:"LeadId",selector:"LeadId",sortable:!0,cell:function(e){return i.a.createElement("a",{className:"pointer",href:Object(m.b)(e.CustomerID,e.LeadId,e.ProductId),target:"_blank"},e.LeadId)}},{name:"Customer Name",selector:"CustName",sortable:!0},{name:"Emp Id",selector:"EmployeeId",sortable:!0,searchable:!0},{name:"Agent Name",selector:"AgentName",sortable:!0,searchable:!0},{name:"Current Callback",selector:"NextCallBackTime",sortable:!0,cell:function(e){return i.a.createElement(f.a,{utc:!0,format:"DD/MM/YYYY HH:mm:ss"},e.NextCallBackTime)}},{name:"Lead Status",selector:"LeadStatus",sortable:!0},{name:"Last Call Time",selector:"LastCallTime",sortable:!0,cell:function(e){return i.a.createElement(f.a,{utc:!0,format:"DD/MM/YYYY HH:mm:ss"},e.LastCallTime)}},{name:"Flag",selector:"Flag",sortable:!0,type:"dropdown",searchable:!0,config:{root:"Flag",data:[{Id:"RED",Display:"RED"},{Id:"GREY",Display:"GREY"}]},cell:function(e){return i.a.createElement("div",{className:e.Flag},e.Flag)}}],Object(d.k)({root:"UserMenu",con:[{UserId:Object(m.j)().UserID},{MenuId:263}]},function(e){e&&e[0]&&0==e[0].length?this.state.hideAssign=!0:this.state.hideAssign=!1}.bind(Object(l.a)(s))),s}return Object(s.a)(a,[{key:"OpenAssignLeadPopUp",value:function(e){this.setState({showAssignLeadPopUp:!0})}},{key:"componentWillReceiveProps",value:function(e){e.CommonData.isError||(this.setState({CallBackTracker:e.CommonData.CallBackTracker}),e.CommonData.AssignedToAgent)}},{key:"handleShow",value:function(e){this.setState({ReportTime:new Date,SelectedSupervisors:e.SelectedSupervisors}),setTimeout(function(){this.fetchCallBackData()}.bind(this),500)}},{key:"handleClose",value:function(){this.setState({showAssignLeadPopUp:!1})}},{key:"fetchCallBackData",value:function(){var e=this.state.SelectedSupervisors;this.props.GetCommonspData({limit:10,skip:0,root:"CallBackTracker",params:[{ManagerIds:e.join()}]}),this.state.SelectedRows.length>0&&this.dtRef.current.handleClearRows()}},{key:"bindAgentDropdown",value:function(){var e=this.state.CallBackTracker,t=[];return e.length>0&&e[1].map((function(e){return t.push(i.a.createElement("option",{key:e.UserID,value:e.UserID},e.UserName))})),t}},{key:"onSelectedAgent",value:function(e){this.setState({SelectedAgentAssigTo:e.target.value})}},{key:"AssignLead",value:function(){for(var e=this,t=this.state,a=t.SelectedRows,n=t.SelectedAgentAssigTo,s=function(t){var s=a[t];e.props.GetCommonspData({limit:10,skip:0,root:"AssignedToAgent",c:"L",params:[{AssignedTo_AgentId:n,AssignedBy_AgentId:Object(m.j)().UserID,ProductId:s.ProductId,LeadId:s.LeadId,GroupId:0,flag:1,JobId:40}]},(function(e){Object(v.b)("Lead ("+s.LeadId+") assign successfully",{type:"success"})}))},l=0;l<a.length;l++)s(l);this.setState({showAssignLeadPopUp:!1}),setTimeout(function(){this.fetchCallBackData()}.bind(this),300)}},{key:"onSelectedRows",value:function(e){this.setState({SelectedRows:e})}},{key:"render",value:function(){var e=this,t=this.columnlist,a=this.state,n=(a.items,a.PageTitle),s=a.CallBackTracker,l=a.showAssignLeadPopUp,o=a.showAlert,c=a.AlertMsg,r=a.AlertVarient,d=a.ReportTime,u=a.SelectedRows,m=[];return u.forEach((function(e){m.push(e.LeadId)})),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"content"},i.a.createElement(k.a,{show:o,variant:r,body:c}),i.a.createElement(v.a,null),i.a.createElement(E.a,null,i.a.createElement(S.a,{md:"12"},i.a.createElement(C.a,null,i.a.createElement(y.a,null,i.a.createElement(E.a,null,i.a.createElement(S.a,{md:6},i.a.createElement(A.a,{tag:"h4"},n)),i.a.createElement(S.a,{md:4},i.a.createElement(A.a,{tag:"h5"},d?i.a.createElement(f.a,{format:"DD/MM/YYYY HH:mm:ss"},d):null)),i.a.createElement(S.a,{md:2},i.a.createElement(p.a,{handleShow:this.handleShow,value:/UserID/g}),this.state.hideAssign?null:i.a.createElement("button",{className:"btn btn-info btn-sm",onClick:function(){return e.OpenAssignLeadPopUp()}},"Assign Lead")))),i.a.createElement(w.a,null,i.a.createElement(h.a,{columns:t,data:s&&s.length>0?s[0]:[],defaultSortField:"Flag",defaultSortAsc:!1,selectableRows:!0,ref:this.dtRef,onSelectedRows:this.onSelectedRows.bind(this)}))))),i.a.createElement(I.a,{show:l,onHide:this.handleClose.bind(this)},i.a.createElement(I.a.Header,{closeButton:!0},i.a.createElement(I.a.Title,null,"Assign Leads")),i.a.createElement(I.a.Body,null,i.a.createElement(E.a,null,i.a.createElement(S.a,null,"LeadId : ",m.join())),i.a.createElement(E.a,null,i.a.createElement(S.a,null,i.a.createElement(D.a.Control,{as:"select",name:"products",onChange:this.onSelectedAgent.bind(this)},i.a.createElement("option",{key:0,value:0},"Select"),this.bindAgentDropdown())))),i.a.createElement(I.a.Footer,null,i.a.createElement(b.If,{condition:0!=this.state.SelectedAgentAssigTo},i.a.createElement(b.Then,null,i.a.createElement(O.a,{variant:"primary",onClick:this.AssignLead.bind(this)},"Assign Lead"))),i.a.createElement(O.a,{variant:"secondary",onClick:this.handleClose.bind(this)},"Close")))))}}]),a}(i.a.Component);t.default=Object(u.b)((function(e){return{CommonData:e.CommonData}}),{GetCommonData:d.g,GetCommonspData:d.h})(T)},428:function(e,t,a){"use strict";var n=a(39),s=a(40),l=a(42),o=a(41),c=a(0),r=a.n(c),i=a(440),d=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={show:s.props.show},s}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState({show:e.show}),e.show&&setTimeout(function(){this.setState({show:!1})}.bind(this),5e3)}},{key:"render",value:function(){return this.state.show?r.a.createElement(i.a,{variant:this.props.variant},this.props.body):null}}]),a}(r.a.Component);t.a=d},441:function(e,t,a){"use strict";var n=a(39),s=a(40),l=a(42),o=a(41),c=a(0),r=a.n(c),i=a(61),d=a(90),u=a(1289),m=a(185),h=(a(452),a(453)),p=a.n(h),g=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={nodes:[],checked:[],expanded:[]},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=2==Object(d.j)().RoleId?75:Object(d.j)().UserID;Object(i.k)({root:"Hierarchy",ManagerId:e,statename:"Hierarchy-"+e,value:this.props.value,state:!0},function(e){var t=JSON.stringify(e).replace(/UserName/g,"label");t=t.replace(this.props.value,"value"),this.setState({nodes:JSON.parse(t)})}.bind(this))}},{key:"componentWillReceiveProps",value:function(e){}},{key:"onButtonClick",value:function(){this.props.handleShow({SelectedSupervisors:this.state.checked}),this.forceUpdate()}},{key:"onMouseEnter",value:function(e){document.getElementById("floating").style.right=0,document.getElementById("handle").style.right="395px"}},{key:"onMouseOut",value:function(e){setTimeout((function(){document.getElementById("floating").style.right="-400px",document.getElementById("handle").style.right="-15px"}),700)}},{key:"RemoveChecked",value:function(e){var t=this.state.checked,a=t.indexOf(e);a>-1&&t.splice(a,1),this.setState(t)}},{key:"onClick",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.nodes;t.checked;return 0==a.length?null:r.a.createElement("div",{id:"floating",className:"floating",onMouseLeave:this.onMouseOut},r.a.createElement(u.a,null,r.a.createElement(m.a,{md:"8"},r.a.createElement("div",{id:"handle",className:"handle",onClick:this.onMouseEnter},"Filter")),r.a.createElement(m.a,{md:"4"},r.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.onButtonClick.bind(this),value:"Show"}))),r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement("div",{className:"managers"},r.a.createElement(p.a,{nodes:a,checked:this.state.checked,expanded:this.state.expanded,checkModel:"all",name:"UserName",showNodeIcon:!1,onCheck:function(t){return e.setState({checked:t})},onExpand:function(t){return e.setState({expanded:t})},showExpandAll:!0})))))}}]),a}(r.a.Component);t.a=g}}]);
//# sourceMappingURL=107.ada42988.chunk.js.map