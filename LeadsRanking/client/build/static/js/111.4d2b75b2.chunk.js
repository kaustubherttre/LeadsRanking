(this.webpackJsonpMatrix_Dashboard=this.webpackJsonpMatrix_Dashboard||[]).push([[111],{1317:function(e,t,a){"use strict";a.r(t);var n=a(43),o=a.n(n),r=a(63),l=a(39),s=a(40),i=a(121),d=a(42),c=a(41),u=a(0),m=a.n(u),p=a(1261),h=a(1262),f=a(420),v=a(1336),y=a(61),b=a(124),g=a(425),I=a(30),D=a(431),S=a(125),E=a(428),k=a(51),C=a.n(k),w=a(90),V=a(530),A=a(424),j=a(531),L=a(533),P=a(563),U=a(532),O=(a(91),a(427),a(53)),R=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){var a=n.state.formvalue;console.log(a);n.state.od;if(e.target&&"select-one"==e.target.type&&"ContentType"==e.target.id)a[e.target.id]=e.target.value,n.setState({selectedFile:null,errors:{}}),document.getElementById("Video").value=null,4==e.target.value?(document.getElementById("Link").style.display="block",document.querySelector('label[for="Link"]').style.display="block"):(document.getElementById("Link").style.display="none",document.querySelector('label[for="Link"]').style.display="none"),console.log("columnsttttttt",n.formColumnList);else if(e.target&&"Link"==e.target.id)a[e.target.id]=e.target.value,e.target.value&&!n.validURL(e.target.value)?n.setState({errors:Object.assign({},n.state.errors,{Link:"Select Valid Link Url"})}):(console.log("beforee",n.state.errors),n.setState({errors:O.a.omit(n.state.errors,"Link")}));else if(e.target&&"checkbox"==e.target.type)a[e.target.id]=e.target.checked;else if(e.target&&"file"==e.target.type){if(e.target.files[0]){var o=document.getElementById("ContentType").value;"undefined"==typeof o||null==o||""==o?n.setState({errors:Object.assign({},n.state.errors,{video:"Select Content Type First"})}):2==o&&(!n.isVideo(e.target.files[0].name)||n.bytesToMegaBytes(e.target.files[0].size)>60)?n.setState({errors:Object.assign({},n.state.errors,{video:"Please select a valid video file of size up to 60MB."})}):4!=o||n.isImage(e.target.files[0].name)?(console.log("beforeeeeee",n.state.errors),n.setState({errors:O.a.omit(n.state.errors,"video")}),console.log("after",n.state.errors)):n.setState({errors:Object.assign({},n.state.errors,{video:"Please select a valid image file"})}),n.setState({selectedFile:e.target.files[0]})}}else e&&"multiselect"==e.type?1==e.selectAll?a[e.id]=5:a[e.id]=e.newselectedList:e._isAMomentObject?a[t]=e.format():(a[e.target.id]=e.target.value,console.log(a[e.target.id]));n.setState({formvalue:a,ModalValueChanged:!0})},n.state={root:"UploadVideoData",isLoaded:!1,showModal:!1,items:[],store:[],activePage:1,PageTitle:"Upload Video",FormTitle:"",formvalue:{},event:"",ModalValueChanged:!1,user:{},prolist:"",agentranklist:"",groupnamelist:"",selectedFile:null,VideoData:[],PostUploadVideoFormData:[],errors:{},addClass:"btn btn-primary",clickVideo:!1,clickModalUrl:"",content:"",PageId:null},n.handleClose=n.handleClose.bind(Object(i.a)(n)),n.handleShow=n.handleShow.bind(Object(i.a)(n)),n.handleSave=n.handleSave.bind(Object(i.a)(n)),n.productchange=n.productchange.bind(Object(i.a)(n)),n.selectedrow={Id:0,ProductId:null,IsRequired:!0,IsActive:!0,StartDate:new Date,EndDate:C()(new Date).add(1,"days")};var o=function(e){var t=e.v;return m.a.createElement("span",{title:t},t?t.substring(0,25):"",t&&t.length>25?"...":"")};n.columnlist=[{name:"SurveyName",label:"Enter Video Title",type:"string",searchable:!0,cell:function(e){return m.a.createElement(o,{v:e.SurveyName})}},{name:"pageId",label:"pageId",type:"int",hide:!0,addable:!1,editable:!1,hideonmodal:!0},{name:"SurveyId",label:"Survey Id",type:"int",hide:!0,addable:!1,editable:!1,hideonmodal:!0},{name:"EmployeeId",label:"EmployeeId",type:"string",searchable:!0,editable:!1,addable:!1,cell:function(e){return m.a.createElement(o,{v:e.EmployeeId})},width:"200px",hideonmodal:!0},{name:"Product",label:"Product",type:"dropdown",config:{root:"Products",cols:["ID AS Id","ProductName AS Display"],con:[{Isactive:1}]},searchable:!0,editable:!1,addable:!1,hideonmodal:!0},{name:"ProductID",label:"Product",type:"dropdown",config:{root:"Products",cols:["ID AS Id","ProductName AS Display"],con:[{Isactive:1}]},hide:!0,editable:!1},{name:"RoleId",label:"Role",type:"multiselect",searchable:!0,distinct:!0,config:{root:"roleids",data:[{Id:13,Display:"Agent"},{Id:12,Display:"Supervisor"},{Id:2,Display:"Admin"}]},hide:!0,editable:!1},{name:"RoleName",label:"RoleName",type:"string",searchable:!0,distinct:!0,editable:!1,addable:!1,cell:function(e){return m.a.createElement(o,{v:e.RoleName})},width:"200px",hideonmodal:!0},{name:"GroupId",label:"Group",type:"multiselect",searchable:!0,distinct:!0,config:{root:"vwMatrixUserGroup",cols:["DISTINCT UGM.UserGroupID AS Id","UGM.UserGroupName AS Display","ProductID"]},hide:!0,editable:!1},{name:"UserGroupName",label:"GroupName",type:"string",searchable:!0,distinct:!0,editable:!1,addable:!1,cell:function(e){return m.a.createElement(o,{v:e.UserGroupName})},width:"200px",hideonmodal:!0},{name:"StartDate",label:"FromDate",type:"datetime",utc:"no"},{name:"EndDate",label:"ToDate",type:"datetime",utc:"no"},{name:"IsRequired",label:"IsRequired",type:"bool"},{name:"IsActive",label:"IsActive",type:"bool"},{name:"ContentType",label:"ContentType",type:"dropdown",config:{data:[{Id:2,Display:"Video"},{Id:4,Display:"Image"}]},editable:!1},{name:"Video",label:"Choose File",type:"video",editable:!1,hide:!0},{name:"Link",label:"Link",type:"string",editable:!0,cell:function(e){return m.a.createElement("a",{href:e.Link,target:"_blank"},m.a.createElement(o,{v:e.Link}))},width:"200px"},{name:"Listen",label:"View",cell:function(e){return m.a.createElement("div",{className:"listenUserDetails"},m.a.createElement("a",{onClick:function(t){return n.getHtmlListen(t,e)},className:"detailsinfo"},m.a.createElement("i",{className:"fa fa-eye"})))},editable:!1,addable:!1,hideonmodal:!0}],n.formColumnList=n.columnlist;return n.ProductList={config:{root:"Products",cols:["ID AS Id","ProductName AS Display"],con:[{Isactive:1}]}},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.columnlist.map((function(t){return Object(w.c)(t,e.props)})),this.props.GetCommonspData({root:"UploadVideoData",c:"L",params:[{ProductID:0}]},function(e){e.data&&e.data.data[0].length>0&&(console.log(e.data.data[0]),this.setState({VideoData:e.data.data[0]}))}.bind(this)),setTimeout(function(){this.setState({user:Object(w.j)()})}.bind(this),500)}},{key:"fnBindStore",value:function(e,t){var a;"dropdown"==e.type&&(t.CommonData[this.state.root]&&t.CommonData[e.config.root]&&(a=Object(w.l)(this.state.VideoData,t.CommonData[e.config.root],e.name),this.setState({items:a})))}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.CommonData.isError||(this.setState({items:e.CommonData[this.state.root]}),this.setState({store:e.CommonData}),this.columnlist.map((function(a){return t.fnBindStore(a,e)}))),e.CommonData&&e.CommonData.InsertSuccessData&&e.CommonData.InsertSuccessData.status&&(200!=e.CommonData.InsertSuccessData.status?this.setState({showAlert:!0,AlertMsg:e.CommonData.InsertSuccessData.error,AlertVarient:"danger"}):this.setState({showAlert:!0,AlertMsg:"Record Add Successfully.",AlertVarient:"success"})),e.CommonData&&e.CommonData.UpdateSuccessData&&e.CommonData.UpdateSuccessData.status&&(200!=e.CommonData.UpdateSuccessData.status?this.setState({showAlert:!0,AlertMsg:e.CommonData.InsertSuccessData.error,AlertVarient:"danger"}):this.setState({showAlert:!0,AlertMsg:"Record Updated Successfully.",AlertVarient:"success"}))}},{key:"validURL",value:function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}},{key:"getHtmlListen",value:function(e,t){if(this.setState({clickVideo:!0,clickModalUrl:t.PageHtmlUrl,content:t.ContentType}),2==t.ContentType){var a=document.getElementById("SurveyVideo");a&&a.play()}}},{key:"fnDatatableCol",value:function(){var e=this,t=this.columnlist,a=Object(w.e)(t);return a.push({name:"Action",cell:function(t){return m.a.createElement(p.a,{"aria-label":"Basic example"},m.a.createElement(h.a,{variant:"secondary",onClick:function(){return e.handleCopy(t)}},m.a.createElement("i",{className:"fa fa-files-o","aria-hidden":"true"})),m.a.createElement(h.a,{variant:"secondary",onClick:function(){return e.handleEdit(t)}},m.a.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})))}}),a}},{key:"handleCopy",value:function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.props.GetCommonspData({root:"UploadVideoData",c:"L",params:[{pageId:t.PageId}]},function(e){if(e.data&&e.data.data[0]){if(console.log("-------------------------------",e.data.data[0],e.data.data[1],e.data.data[2],e.data.data[3]),e.data.data[1].length>0)if(0==e.data.data[1][0].RoleId)t.RoleId=[{label:"All items are Selected",value:"*"}];else{var a=[];e.data.data[1].map((function(e){a.push({label:e.RoleName.toString(),value:e.RoleId})})),t.RoleId=a}if(e.data.data[3]&&e.data.data[3].length>0&&(t.ProductID=e.data.data[3][0].ProductID),e.data.data[2].length>0)if(0==e.data.data[2][0].GroupId)t.GroupId=[{label:"All items are Selected",value:"*"}];else{var n=[];e.data.data[2].map((function(e){n.push({label:e.UserGroupName.toString(),value:e.GroupId})})),t.GroupId=n}console.log("////////////////////////////////////",t),this.setState({formvalue:t,event:"Copy",showModal:!0,FormTitle:"Copy Record"})}}.bind(this));case 3:e.sent;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleEdit",value:function(e){this.setState({od:Object.assign({},e,{}),formvalue:Object.assign({},e,{}),event:"Edit",showModal:!0,FormTitle:"Edit Record"})}},{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"handleShow",value:function(){this.setState({formvalue:this.selectedrow,event:"Add",showModal:!0,FormTitle:"Add New Record"})}},{key:"handleSave",value:function(){var e=Object(r.a)(o.a.mark((function e(t){var a,n,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(document.getElementsByName("frmUploadVideo").length>0&&document.getElementsByName("frmUploadVideo")[0].reportValidity())){e.next=41;break}if(a=JSON.parse(JSON.stringify(this.state.formvalue)),this.fnCleanData(a),console.log("formvalue",a),"InvTypeID"in a||(a.InvTypeID=1),a.Id,Object(w.j)().UserID,delete a.Id,"Edit"!=this.state.event){e.next=19;break}return this.fnCleanData(a),this.setState({selectedFile:""}),e.next=14,this.addVideo(a,"edit");case 14:if(0!=e.sent){e.next=17;break}return e.abrupt("return",!1);case 17:e.next=36;break;case 19:if("Copy"!=this.state.event){e.next=30;break}return console.log("formvalueee////////////////////////////",a),this.fnCleanData(a),e.next=25,this.addVideo(a,"add");case 25:if(0!=e.sent){e.next=28;break}return e.abrupt("return",!1);case 28:e.next=36;break;case 30:return e.next=33,this.addVideo(a,"add");case 33:if(0!=e.sent){e.next=36;break}return e.abrupt("return",!1);case 36:n=parseInt(a.ProductID),r=this.state.pageId?this.state.pageId:null,l=n?{ProductId:n}:{pageId:r},(n||r)&&this.props.GetCommonspData({root:"UploadVideoData",c:"L",params:[l]},function(e){e.data&&e.data.data[0]&&(console.log(e.data.data[0]),this.setState({VideoData:e.data.data[0]}))}.bind(this)),this.setState({showModal:!1});case 41:return this.setState({addClass:"btn btn-primary"}),e.abrupt("return",!1);case 43:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addVideo",value:function(){var e=Object(r.a)(o.a.mark((function e(t,a){var n,r,l,s,i,d,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),"add"!=a){e.next=9;break}if(""!=t.RoleId&&"undefined"!=typeof t.RoleId){e.next=6;break}return alert("Please enter Role"),e.abrupt("return",!1);case 6:if(""!=t.SurveyName&&"undefined"!=typeof t.SurveyName){e.next=9;break}return alert("Please enter Surveyname"),e.abrupt("return",!1);case 9:if(!(Object.keys(this.state.errors).length>0)){e.next=13;break}return console.log("errorssssssssssssssssss",this.state.errors),alert("Form not Submitted"),e.abrupt("return",!1);case 13:return(n=document.createElement("span")).setAttribute("class","UploadVideoSave fa fa-spin fa-spinner"),document.getElementById("saveVideoForm").insertBefore(n,document.getElementById("saveVideo")),r=Object(w.j)().UserID,l=new FormData,console.log(l),"add"==a&&l.append("myFile",this.state.selectedFile,this.state.selectedFile.name),"add"==a&&(Array.isArray(t.RoleId)?(s=t.RoleId.map((function(e){return"*"==e.value?0:e.value})),i=s.join(",")):i=0,Array.isArray(t.GroupId)?(d=t.GroupId.map((function(e){return"*"==e.value?0:e.value})),c=d.join(",")):c=0),"add"==a&&(t.ProductID?l.append("ProductId",t.ProductID):l.append("ProductId",""),l.append("roleId",i),l.append("groupId",c)),"edit"==a&&l.append("pageId",t.PageId),l.append("StartDate",t.StartDate),l.append("Endtime",t.EndDate),l.append("SurveyName",t.SurveyName),l.append("IsRequired",t.IsRequired),l.append("IsActive",t.IsActive),l.append("userId",r),l.append("ContentType",t.ContentType),t.Link&&4==t.ContentType?l.append("Link",t.Link):l.append("Link",""),e.next=33,Object(y.H)(l,function(e){console.log(e),"add"==a?alert("Record Added"):"edit"==a&&alert("Record Updated"),this.setState({pageId:e.data.data[0].pageId})}.bind(this));case 33:u=e.sent,console.log(u);case 35:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getExtension",value:function(e){var t=e.split(".");return t[t.length-1]}},{key:"isVideo",value:function(e){switch(this.getExtension(e).toLowerCase()){case"m4v":case"avi":case"mpg":case"mp4":case"webm":case"mov":return!0}return!1}},{key:"isImage",value:function(e){switch(this.getExtension(e).toLowerCase()){case"gif":case"jpeg":case"png":case"jpg":return!0}return!1}},{key:"bytesToMegaBytes",value:function(e){return e/1048576}},{key:"fnCleanData",value:function(e){e=Object(w.d)(this.columnlist,e),this.setState({formvalue:e})}},{key:"productchange",value:function(e,t){this.props.GetCommonspData({root:"UploadVideoData",c:"L",params:[{ProductId:e.target.value}]},function(e){e.data&&e.data.data[0]&&(console.log(e.data.data[0]),this.setState({VideoData:e.data.data[0]}))}.bind(this))}},{key:"fnRenderfrmControl",value:function(e,t,a,n,o){return setTimeout((function(){t&&4==t.ContentType?document.getElementById("Link")&&(document.getElementById("Link").style.display="block",document.querySelector('label[for="Link"]').style.display="block"):document.getElementById("Link")&&(document.getElementById("Link").style.display="none",document.querySelector('label[for="Link"]').style.display="none")}),200),Object(w.f)(e,t,a,n,o)}},{key:"renderViewData",value:function(e,t){return 4==e?m.a.createElement("img",{src:t}):2==e?m.a.createElement("video",{id:"SurveyVideo",width:"450",controls:!0},m.a.createElement("source",{src:t})):void 0}},{key:"render",value:function(){var e=this,t=this.fnDatatableCol(),a=this.state,n=(a.items,a.PageTitle),o=a.showModal,r=a.FormTitle,l=a.formvalue,s=a.errors,i=a.showAlert,d=a.AlertMsg,c=a.AlertVarient,u=a.ModalValueChanged,p=a.event,y=a.content;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"content"},m.a.createElement(E.a,{show:i,variant:c,body:d}),m.a.createElement(V.a,null,m.a.createElement(A.a,{md:"12"},m.a.createElement(j.a,null,m.a.createElement(L.a,null,m.a.createElement(V.a,null,m.a.createElement(A.a,{md:7},m.a.createElement(P.a,{tag:"h4"},n)),m.a.createElement(A.a,{md:3},m.a.createElement(f.a.Group,{as:A.a,md:12,controlId:"product_dropdown"},m.a.createElement(S.a,{firstoption:"Select Product",col:this.ProductList,onChange:this.productchange}))),m.a.createElement(A.a,{md:2},m.a.createElement(h.a,{variant:"primary",onClick:this.handleShow},"ADD")))),m.a.createElement(U.a,null,m.a.createElement(D.a,{columns:t,data:this.state.VideoData}))))),m.a.createElement(v.a,{show:o,onHide:this.handleClose,dialogClassName:"modal-90w"},m.a.createElement(v.a.Header,{closeButton:!0},m.a.createElement(v.a.Title,null,r)),m.a.createElement(v.a.Body,null,m.a.createElement(f.a,{name:"frmUploadVideo"},m.a.createElement(V.a,null,this.formColumnList.map((function(t){return e.fnRenderfrmControl(t,l,e.handleChange,p,s)}))))),m.a.createElement(v.a.Footer,null,m.a.createElement(h.a,{variant:"secondary",onClick:this.handleClose},"Close"),m.a.createElement(g.If,{condition:u},m.a.createElement(g.Then,null,m.a.createElement("form",{ref:"form",onSubmit:this.handleSave,id:"saveVideoForm"},m.a.createElement("input",{type:"submit",id:"saveVideo",className:"btn btn-primary btnsaveVideo",value:"Save Changes"})))))),m.a.createElement(v.a,{show:this.state.clickVideo,onHide:function(){return e.setState({clickVideo:!1})},dialogClassName:"modal-50w"},m.a.createElement(v.a.Header,{closeButton:!0},m.a.createElement(v.a.Title,null)),m.a.createElement(v.a.Body,null,m.a.createElement("div",{className:"modalmoreinfodata"},this.renderViewData(y,this.state.clickModalUrl))),m.a.createElement(v.a.Footer,null))))}}]),a}(m.a.Component);t.default=Object(I.b)((function(e){return{CommonData:e.CommonData}}),{GetCommonData:y.g,InsertData:y.y,UpdateData:y.S,addRecord:b.d,GetCommonspData:y.h})(R)},428:function(e,t,a){"use strict";var n=a(39),o=a(40),r=a(42),l=a(41),s=a(0),i=a.n(s),d=a(440),c=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={show:o.props.show},o}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState({show:e.show}),e.show&&setTimeout(function(){this.setState({show:!1})}.bind(this),5e3)}},{key:"render",value:function(){return this.state.show?i.a.createElement(d.a,{variant:this.props.variant},this.props.body):null}}]),a}(i.a.Component);t.a=c}}]);
//# sourceMappingURL=111.4d2b75b2.chunk.js.map