(this.webpackJsonpMatrix_Dashboard=this.webpackJsonpMatrix_Dashboard||[]).push([[88],{1330:function(t,e,a){"use strict";a.r(e);var n=a(39),r=a(40),o=a(121),i=a(42),s=a(41),l=a(0),d=a.n(l),c=a(1261),u=a(1262),m=a(1336),h=a(420),p=a(432),f=a(124),b=a(30),y=a(431),v=a(90),S=a(430),D=(a(427),a(51)),C=a.n(D),g=a(530),O=a(424),E=a(531),I=a(533),M=a(563),P=a(532),j=function(t){Object(i.a)(a,t);var e=Object(s.a)(a);function a(t){var r;Object(n.a)(this,a),(r=e.call(this,t)).handleChange=function(t,e){var a=r.state.formvalue;t.target&&"checkbox"==t.target.type?a[t.target.id]=t.target.checked:t._isAMomentObject?a[e]=t.format():a[t.target.id]=t.target.value,r.setState({formvalue:a})},r.state={isLoaded:!1,showModal:!1,items:[],store:[],activePage:1,root:"PortPriStatus",PageTitle:"Port PRI Status",FormTitle:"",formvalue:{},event:"",errors:{},fields:{}},r.handleClose=r.handleClose.bind(Object(o.a)(r)),r.handleShow=r.handleShow.bind(Object(o.a)(r)),r.handleSave=r.handleSave.bind(Object(o.a)(r)),r.handleChange=r.handleChange.bind(Object(o.a)(r)),r.handleValidation=r.handleValidation.bind(Object(o.a)(r)),r.selectedrow={id:0,portno:"",mincallerid:"",maxcallerid:"",currentpri:"",sippri:0,sipip:"",sip_provider:"",date:C()().format("YYYY-MM-DD"),failover:"",building:"",server_ip:"",ismaincallable:"",isActive:1},r.columnlist=[{name:"id",label:"ID",type:"hidden",hide:!0},{name:"portno",label:"Port No.",searchable:!1,required:!0,type:"string"},{name:"mincallerid",label:"Min Caller Id",searchable:!1,type:"string"},{name:"maxcallerid",label:"Max Caller Id",searchable:!1,type:"string"},{name:"currentpri",label:"current PRI",searchable:!1,type:"string"},{name:"sippri",label:"Sip PRI",searchable:!1,type:"string"},{name:"sipip",label:"Sip IP",searchable:!1,type:"string"},{name:"sip_provider",label:"Sip Provider",searchable:!1,type:"string"},{name:"failover",label:"Failover",searchable:!1,type:"string"},{name:"building",label:"building",searchable:!1,required:!0,type:"string"},{name:"server_ip",label:"Server IP",searchable:!1,required:!0,type:"string"},{name:"ismaincallable",label:"Is Main Callable",searchable:!1,type:"bool"}];return r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.columnlist.map((function(e){return Object(v.c)(e,t.props)})),this.props.GetMySqlData({root:this.state.root,order:"id",con:{isActive:1}},function(t){}.bind(this))}},{key:"fnBindStore",value:function(t,e){var a;"dropdown"==t.type&&(e.CommonData[this.state.root]&&e.CommonData[t.config.root]&&(a=Object(v.l)(e.CommonData[this.state.root],e.CommonData[t.config.root],t.name),this.setState({items:a})))}},{key:"componentWillReceiveProps",value:function(t){var e=this;t.CommonData.isError||(this.setState({items:t.CommonData[this.state.root]}),this.setState({store:t.CommonData}),this.columnlist.map((function(a){return e.fnBindStore(a,t)}))),t.CommonData&&t.CommonData.InsertSuccessData&&t.CommonData.InsertSuccessData.status&&200!=t.CommonData.InsertSuccessData.status&&alert(t.CommonData.InsertSuccessData.error),t.CommonData&&t.CommonData.UpdateSuccessData&&t.CommonData.UpdateSuccessData.status&&200!=t.CommonData.UpdateSuccessData.status&&alert(t.CommonData.UpdateSuccessData.error)}},{key:"fnDatatableCol",value:function(){var t=this,e=Object(v.e)(this.columnlist);return e.unshift({name:"Action",width:"150px",cell:function(e){return d.a.createElement(c.a,{"aria-label":"Basic example"},d.a.createElement(u.a,{variant:"secondary",onClick:function(){return t.handleEdit(e)}},d.a.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),d.a.createElement(u.a,{variant:"secondary",onClick:function(){window.confirm("Are you sure you wish to delete this?")&&t.handleDelete(e)}},d.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"})))}}),e}},{key:"handleEdit",value:function(t){this.setState({od:Object.assign({},t,{}),formvalue:t,event:"Edit",showModal:!0,FormTitle:"Edit Record"})}},{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"handleShow",value:function(){this.setState({formvalue:this.selectedrow,event:"Add",showModal:!0,FormTitle:"Add New Record"})}},{key:"handleDelete",value:function(t){this.setState({od:Object.assign({},t,{}),formvalue:t}),this.props.UpdateData({root:this.state.root,body:{isActive:0},querydata:{id:t.id}},(function(t){200===t.data.status?Object(S.b)("PRI status removed successfully!",{type:"success"}):S.b.error("PRI status could not be removed")})),this.props.addRecord({root:"History",body:{module:"PortPriStatus",action:"Delete",od:this.state.od,nd:{isActive:0},ts:new Date,by:Object(v.j)().UserID}})}},{key:"handleSave",value:function(){var t=JSON.parse(JSON.stringify(this.state.formvalue));if(this.handleValidation(t)){if(this.fnCleanData(t,!0),"Edit"==this.state.event){var e=t.id;delete t.id,this.fnCleanData(t,!0),t.date=C()(t.date).format("YYYY-MM-DD"),this.props.UpdateData({root:this.state.root,body:t,querydata:{id:e}},(function(t){200===t.data.status?Object(S.b)("PRI status updated successfully!",{type:"success"}):S.b.error("PRI status could not be updated")})),this.props.addRecord({root:"History",body:{module:"PortPriStatus",action:"Edit",od:this.state.od,nd:t,ts:new Date,by:Object(v.j)().UserID}})}else{var a=JSON.parse(JSON.stringify(this.state.formvalue));delete a.id,this.fnCleanData(a,!1),this.props.InsertData({root:this.state.root,body:a},(function(t){200===t.data.status?Object(S.b)("PRI status added successfully!",{type:"success"}):S.b.error("PRI status could not be added")})),this.props.addRecord({root:"History",body:{module:"PortPriStatus",action:"Add",od:{},nd:a,ts:new Date,by:Object(v.j)().UserID}})}this.setState({showModal:!1})}}},{key:"handleValidation",value:function(t){var e=!0;return t.portno||(e=!1,S.b.error("Port no. field is required")),t.mincallerid||(e=!1,S.b.error("Min called id field is required")),t.currentpri||(e=!1,S.b.error("Current PRI field is required")),t.server_ip||(e=!1,S.b.error("Server IP field is required")),e}},{key:"fnCleanData",value:function(t,e){t=Object(v.d)(this.columnlist,t,e),this.setState({formvalue:t})}},{key:"render",value:function(){var t=this,e=this.fnDatatableCol(),a=this.state,n=a.items,r=a.PageTitle,o=a.showModal,i=a.FormTitle,s=a.formvalue,l=a.event;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"content"},d.a.createElement(S.a,null),d.a.createElement(g.a,null,d.a.createElement(O.a,{md:"12"},d.a.createElement(E.a,null,d.a.createElement(I.a,null,d.a.createElement(g.a,null,d.a.createElement(O.a,{md:11},d.a.createElement(M.a,{tag:"h4"},r)),d.a.createElement(O.a,{md:1},d.a.createElement(u.a,{variant:"primary",onClick:this.handleShow},"ADD")))),d.a.createElement(P.a,null,d.a.createElement(y.a,{columns:e,data:n}))))),d.a.createElement(m.a,{show:o,onHide:this.handleClose,dialogClassName:"modal-90w"},d.a.createElement(m.a.Header,{closeButton:!0},d.a.createElement(m.a.Title,null,i)),d.a.createElement(m.a.Body,null,d.a.createElement(h.a,null,d.a.createElement(g.a,null,this.columnlist.map((function(e){return Object(v.f)(e,s,t.handleChange,l)}))))),d.a.createElement(m.a.Footer,null,d.a.createElement(u.a,{variant:"secondary",onClick:this.handleClose},"Close"),d.a.createElement(u.a,{variant:"primary",onClick:this.handleSave},"Save Changes")))))}}]),a}(d.a.Component);e.default=Object(b.b)((function(t){return{CommonData:t.CommonData}}),{GetCommonData:f.b,GetMySqlData:p.b,InsertData:p.c,UpdateData:p.d,addRecord:f.d})(j)},427:function(t,e,a){},432:function(t,e,a){"use strict";a.d(e,"b",(function(){return d})),a.d(e,"c",(function(){return c})),a.d(e,"d",(function(){return u})),a.d(e,"a",(function(){return m}));var n=a(4),r=a.n(n),o=a(1),i=a(9),s=function(t){return t.dataToSend.state&&t.dataToSend.statename&&localStorage.setItem(t.dataToSend.statename,JSON.stringify(t.data)),{type:i.a.GET_COMMON_SUCCESS,payload:t.data,root:t.dataToSend.root}},l=function(t){return{type:i.a.GET_COMMON_FAIL,payload:t}},d=function(t,e){if(null!=t.data||void 0!=t.data)return function(e,a){e(s({data:t.data,dataToSend:t}))};try{if(t.state&&localStorage.getItem(t.statename)||localStorage.getItem(t.statename))return function(e,a){var n=JSON.parse(localStorage.getItem(t.statename));e(s({data:n,dataToSend:t}))}}catch(a){}return function(a,n){r.a.get(o.a.api.base_url+"/mydb/list/",{params:t}).then((function(n){t.state&&t.statename&&localStorage.setItem(t.statename,JSON.stringify(n.data.data)),e&&e(n),a(s({data:n.data.data[0],dataToSend:t}))})).catch((function(t){a(l(t))}))}},c=function(t,e){return function(a,n){r.a.post(o.a.api.base_url+"/mydb/insert/",{data:t}).then((function(t){var n;e&&e(t),a((n={data:t.data},{type:i.a.INSERT_COMMON_SUCCESS,payload:n.data}))})).catch((function(t){a(function(t){return{type:i.a.INSERT_COMMON_FAIL,payload:t}}(t))}))}},u=function(t,e){return function(a,n){r.a.post(o.a.api.base_url+"/mydb/update/",{data:t}).then((function(t){var n;e&&e(t),a((n={data:t.data},{type:i.a.UPDATE_COMMON_SUCCESS,payload:n.data}))})).catch((function(t){a(function(t){return{type:i.a.UPDATE_COMMON_FAIL,payload:t}}(t))}))}},m=function(t,e){try{if(t.state&&localStorage.getItem(t.statename)||localStorage.getItem(t.statename)){var a=JSON.parse(localStorage.getItem(t.statename));return void e(a)}}catch(n){}r.a.get(o.a.api.base_url+"/mydb/list/",{params:t}).then((function(a){t.state&&t.statename&&localStorage.setItem(t.statename,JSON.stringify(a.data.data)),e(a.data.data)})).catch((function(t){}))}}}]);
//# sourceMappingURL=88.f6161962.chunk.js.map