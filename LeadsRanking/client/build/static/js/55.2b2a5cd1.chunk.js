(this.webpackJsonpMatrix_Dashboard=this.webpackJsonpMatrix_Dashboard||[]).push([[55],{1326:function(e,t,a){"use strict";a.r(t);var n=a(39),s=a(40),o=a(42),i=a(41),l=a(0),r=a.n(l),c=a(61),u=a(30),d=a(90),m=a(431),h=a(91),p=a.n(h),f=a(425),v=a(428),S=a(430),y=(a(427),a(53),a(448)),E=a(530),b=a(424),g=a(531),P=a(533),C=a(563),I=a(532),w=a(1336),L=a(1262),D=(a(51),a(458),function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={PageTitle:"EMI Payment Failed Leads",EmiPaymentFailedLeads:[],showAssignLeadPopUp:!1,SelectedAgentAssigTo:0,SelectedRow:null,hideAssign:!1,ReportTime:null,SelectedSupervisors:[],SelectedRows:[],clearSelected:!1,formvalue:{},paymentStatuses:[]},s.dtRef=r.a.createRef(),s.myInputRef=r.a.createRef(),s.columnlist=[{name:"LeadId",selector:"LeadId"},{name:"Proposal No",selector:"ProposalNo"},{name:"Insurer Name",selector:"InsurerName"},{name:"Cancellation Reason",selector:"FailureReason"},{name:"Mode Of Payment",selector:"PaymentMode"},{name:"EMI Missed",selector:"EMIMissed"},{name:"Total Amount Pending",selector:"AmountPending"},{name:"Grace Period Ends By",sortable:!0,cell:function(e){return r.a.createElement(p.a,{utc:!0,format:"DD/MM/YYYY HH:mm:ss"},e.GracePeriodDate)}},{name:"Current Status",selector:"Status",width:"150px",cell:function(e){return"-"!==e.Status?r.a.createElement("div",{className:"wrap currentPaymentStatus"},e.Status):e.Status}},{name:"Action",width:"120px",cell:function(e){return r.a.createElement("div",{className:"py-1"},r.a.createElement(y.a,{firstoption:"Select",value:e.StatusId,id:"select_"+e.LeadId,items:s.state.paymentStatuses,onChange:function(t){return s.handlePaymentStatusChange(t,e)}}))}}],s}return Object(s.a)(a,[{key:"OpenAssignLeadPopUp",value:function(e){this.setState({showAssignLeadPopUp:!0})}},{key:"componentWillReceiveProps",value:function(e){if(!e.CommonData.isError&&e.CommonData.EmiPaymentFailed){var t=e.CommonData.EmiPaymentFailed;this.setState({EmiPaymentFailedLeads:t[0]})}}},{key:"handlePaymentStatusChange",value:function(e,t){"0"===e.target.value||""===e.target.value?S.b.error("Select a status"):(t.newStatus=parseInt(e.target.value),this.setState({formvalue:t}),this.handleSave(t))}},{key:"handleSave",value:function(e){var t=JSON.parse(JSON.stringify(e));this.props.GetCommonspData({limit:10,skip:0,root:"UpdateEMIPaymentStatus",params:[{UserId:Object(d.j)().UserID,LeadId:t.LeadId,status:t.newStatus}]},(function(e){200===e.data.status?Object(S.b)("Status submitted successfully!",{type:"success"}):S.b.error("Status could not be submitted"),setTimeout(function(){window.location.reload(!1)}.bind(this),2e3)}))}},{key:"handleClose",value:function(){this.setState({showAssignLeadPopUp:!1})}},{key:"componentDidMount",value:function(){this.getPaymentStatusList(),this.fetchCallBackData()}},{key:"fetchCallBackData",value:function(){this.state.SelectedSupervisors;this.props.GetCommonspData({limit:10,skip:0,root:"EmiPaymentFailed",params:[{UserId:Object(d.j)().UserID}]}),this.state.SelectedRows.length>0&&this.dtRef.current.handleClearRows()}},{key:"getPaymentStatusList",value:function(){this.props.GetCommonData({limit:10,skip:0,root:"EMIFailedStatusMaster",con:[{IsActive:1}],c:"L"},function(e){var t=[];e.data.data[0].forEach((function(e){t.push({Id:e.Id,Display:e.status})})),this.setState({paymentStatuses:t})}.bind(this))}},{key:"onSelectedAgent",value:function(e){this.setState({SelectedAgentAssigTo:e.target.value})}},{key:"AssignLead",value:function(){for(var e=this,t=this.state,a=t.SelectedRows,n=(t.SelectedAgentAssigTo,function(t){var n=a[t];o={LeadId:n.LeadId,Name:n.CustName,CustomerId:n.CustomerID,UserID:Object(d.j)().UserID,Priority:0,ProductId:n.ProductId,Reason:"BookedLead",ReasonId:30,CallStatus:""},i={UserId:Object(d.j)().UserID,Leads:[o]},e.props.PostCommunicationData({root:"communication/LeadPrioritization.svc/AddLeadToPriorityQueue",data:i},(function(e){Object(S.b)("Lead ("+n.LeadId+") Added in Call Queue",{type:"success"})}))}),s=0;s<a.length;s++){var o,i;n(s)}this.setState({showAssignLeadPopUp:!1})}},{key:"onSelectedRows",value:function(e){this.setState({SelectedRows:e})}},{key:"render",value:function(){var e=this,t=this.columnlist,a=this.state,n=(a.items,a.PageTitle),s=a.EmiPaymentFailedLeads,o=a.showAssignLeadPopUp,i=a.showAlert,l=a.AlertMsg,c=a.AlertVarient,u=a.ReportTime,d=a.SelectedRows;console.log(this.state.paymentStatuses);var h=[];return d.forEach((function(e){h.push(e.LeadId)})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"content EmiPaymentFailedLeadsContainer"},r.a.createElement(v.a,{show:i,variant:c,body:l}),r.a.createElement(S.a,null),r.a.createElement(E.a,null,r.a.createElement(b.a,{md:"12"},r.a.createElement(g.a,null,r.a.createElement(P.a,null,r.a.createElement(E.a,null,r.a.createElement(b.a,{md:6},r.a.createElement(C.a,{tag:"h4"},n)),r.a.createElement(b.a,{md:4},r.a.createElement(C.a,{tag:"h5"},u?r.a.createElement(p.a,{format:"DD/MM/YYYY HH:mm:ss"},u):null)),r.a.createElement(b.a,{md:2},this.state.hideAssign?null:r.a.createElement("button",{className:"btn btn-info btn-sm float-right",onClick:function(){return e.OpenAssignLeadPopUp()}},"Add Lead")))),r.a.createElement(I.a,null,r.a.createElement(m.a,{columns:t,data:s&&s.length>0?s:[],defaultSortField:"GracePeriodDate",defaultSortAsc:!1,selectableRows:!0,export:!1,ref:this.dtRef,onSelectedRows:this.onSelectedRows.bind(this)}))))),r.a.createElement(w.a,{show:o,onHide:this.handleClose.bind(this)},r.a.createElement(w.a.Header,{closeButton:!0},r.a.createElement(w.a.Title,null,"Add Leads")),r.a.createElement(w.a.Body,null,r.a.createElement(E.a,null,r.a.createElement(b.a,null,"LeadId : ",h.join())),r.a.createElement(E.a,null,r.a.createElement(b.a,null))),r.a.createElement(w.a.Footer,null,r.a.createElement(f.If,{condition:this.state.SelectedRows.length>0},r.a.createElement(f.Then,null,r.a.createElement(L.a,{variant:"primary",onClick:this.AssignLead.bind(this)},"Add Lead"))),r.a.createElement(L.a,{variant:"secondary",onClick:this.handleClose.bind(this)},"Close")))))}}]),a}(r.a.Component));t.default=Object(u.b)((function(e){return{CommonData:e.CommonData}}),{GetCommonData:c.g,GetCommonspData:c.h,PostCommunicationData:c.B})(D)},428:function(e,t,a){"use strict";var n=a(39),s=a(40),o=a(42),i=a(41),l=a(0),r=a.n(l),c=a(440),u=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={show:s.props.show},s}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState({show:e.show}),e.show&&setTimeout(function(){this.setState({show:!1})}.bind(this),5e3)}},{key:"render",value:function(){return this.state.show?r.a.createElement(c.a,{variant:this.props.variant},this.props.body):null}}]),a}(r.a.Component);t.a=u},448:function(e,t,a){"use strict";var n=a(39),s=a(40),o=a(42),i=a(41),l=a(0),r=a.n(l),c=a(420),u=(a(30),a(61),function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={items:[]},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState({items:e.items})}},{key:"displayoption",value:function(e){return r.a.createElement("option",{key:e.Id,value:e.Id},e.Display)}},{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.value,s=t.onChange,o=t.visible,i=t.items;return i||(i=[]),0==o?null:r.a.createElement("div",null,r.a.createElement(c.a.Control,{as:"select",disabled:this.props.disabled,value:n,name:a,onChange:s},!1!==this.props.firstoption&&r.a.createElement("option",{key:0,value:0},this.props.firstoption?this.props.firstoption:"Select"),i.map((function(t){return e.displayoption(t)}))))}}]),a}(r.a.Component));t.a=u},458:function(e,t,a){}}]);
//# sourceMappingURL=55.2b2a5cd1.chunk.js.map