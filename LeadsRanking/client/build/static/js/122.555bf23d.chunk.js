(this.webpackJsonpMatrix_Dashboard=this.webpackJsonpMatrix_Dashboard||[]).push([[122],{1309:function(e,t,a){"use strict";a.r(t);var n=a(39),i=a(40),d=a(42),l=a(41),r=a(0),o=a.n(r),s=a(61),u=a(90),T=a(530),c=a(424),h=a(531),g=a(533),m=a(563),P=a(532),f=(a(51),a(53)),C=o.a.lazy((function(){return a.e(17).then(a.t.bind(null,1219,7))})),p=[{dataField:"UserName",heading:"UserName",fixedWidth:!0,percentageWidth:25},{dataField:"TotalCount",heading:"Total Count"},{dataField:"TotalPending",heading:"Total Pending"},{dataField:"TLPending",heading:"TL Pending"},{dataField:"PendingWithinTAT",heading:"Pending Within TAT"},{dataField:"PendingOutsideTAT",heading:"Pending outside TAT"},{dataField:"TotalClosureP",heading:"Total Closure %"},{dataField:"TotalClosureWithinTATP",heading:"Total Closure% within TAT"}],b={tableClasses:"table table-striped table-responsive",buttonClasses:"btn btn-default",showButton:!1},v=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={nodes:[],ResponseData:[]},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){console.log("getuser",Object(u.j)());var e=2==Object(u.j)().RoleId?75:Object(u.j)().UserID,t=Object(u.j)().RoleId,a=2==Object(u.j)().RoleId?"ET01104":Object(u.j)().EmployeeId,n=btoa(a+"-"+t);console.log(n),Object(s.p)(n,function(t){var a=null;1==t.data.status&&(a=t.data.response.output,this.setState({ResponseData:t.data.response.output})),Object(s.k)({root:"Hierarchy",ManagerId:e,statename:"Hierarchy-"+e,value:this.props.value,state:!0},function(e){e=this.getTree(e,a),this.setState({nodes:e})}.bind(this))}.bind(this))}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getTree",value:function(e,t){for(var a=this,n=function(n){var i=f.a.where(t,{ManagerId:e[n].UserID});e[n].data={RoleId:e[n].RoleId,UserID:e[n].UserID,EmployeeId:e[n].EmployeeId,UserName:e[n].UserName,ManagerId:e[n].ManagerId,RoleName:e[n].RoleName,TotalCount:0,TotalPending:0,TLPending:0,PendingWithinTAT:0,PendingOutsideTAT:0,TotalClosure:0,TotalClosureWithinTAT:0,TotalClosureP:0,TotalClosureWithinTATP:0},e[n].children&&e[n].children.length>0?e[n].children=a.getTree(e[n].children,t):e[n].children=[],i.forEach((function(t){var i=f.a.filter(e[n].children,(function(e){return e.EmployeeId==t.emp_id})),d=a.WithInTAT(t.submission_date);if(i.length>0){for(var l in e[n].children)if(e[n].children[l].EmployeeId==t.emp_id){e[n].children[l].data.TotalCount=e[n].children[l].data.TotalCount+1,e[n].children[l].data.TotalPending=e[n].children[l].data.TotalPending+("verifiedByTl"==t.status?1:0),e[n].children[l].data.TLPending=e[n].children[l].data.TLPending+("submitted"==t.status?1:0),e[n].children[l].data.PendingWithinTAT=e[n].children[l].data.PendingWithinTAT+("submitted"==t.status&&d?1:0),e[n].children[l].data.PendingOutsideTAT=e[n].children[l].data.PendingOutsideTAT+("submitted"==t.status&&0==d?1:0),e[n].children[l].data.TotalClosure=e[n].children[l].data.TotalClosure+("verified"==t.status?1:0),e[n].children[l].data.TotalClosureWithinTAT=e[n].children[l].data.TotalClosureWithinTAT+("verified"==t.status&&0==d?1:0),e[n].children[l].data.TotalClosureP=e[n].children[l].data.TotalClosureP+("verified"==t.status?1:0),e[n].children[l].data.TotalClosureWithinTATP=e[n].children[l].data.TotalClosureWithinTATP+("verified"==t.status&&0==d?1:0);break}}else{var r={EmployeeId:t.emp_id,UserName:t.emp_name,ManagerId:t.ManagerId,data:{EmployeeId:t.emp_id,UserName:t.emp_name,ManagerId:t.ManagerId,TotalCount:1,TotalPending:"verifiedByTl"==t.status?1:0,TLPending:"submitted"==t.status?1:0,PendingWithinTAT:"submitted"==t.status&&d?1:0,PendingOutsideTAT:"submitted"==t.status&&0==d?1:0,TotalClosure:"verified"==t.status?1:0,TotalClosureWithinTAT:"verified"==t.status&&0==d?1:0,TotalClosureP:"verified"==t.status?1:0,TotalClosureWithinTATP:"verified"==t.status&&0==d?1:0},children:[]};e[n].children.push(r)}})),e[n].data.TotalCount=e[n].children.reduce((function(e,t){return e+t.data.TotalCount}),0),e[n].data.TotalPending=e[n].children.reduce((function(e,t){return e+t.data.TotalPending}),0),e[n].data.TLPending=e[n].children.reduce((function(e,t){return e+t.data.TLPending}),0),e[n].data.PendingWithinTAT=e[n].children.reduce((function(e,t){return e+t.data.PendingWithinTAT}),0),e[n].data.PendingOutsideTAT=e[n].children.reduce((function(e,t){return e+t.data.PendingOutsideTAT}),0);var d=e[n].children.reduce((function(e,t){return e+t.data.TotalClosure}),0),l=e[n].children.reduce((function(e,t){return e+t.data.TotalClosureWithinTAT}),0),r=a.CalculatePercentage(e[n].data.TotalCount,d),o=a.CalculatePercentage(e[n].data.TotalCount,l);e[n].data.TotalClosure=d,e[n].data.TotalClosureWithinTAT=l,e[n].data.TotalClosureP=d+" / "+r+" %",e[n].data.TotalClosureWithinTATP=l+" / "+o+" %"},i=0;i<e.length;i++)n(i);return e}},{key:"descriptionRenderer",value:function(e,t){return o.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.data[t]}})}},{key:"WithInTAT",value:function(e){return(new Date-new Date(e))/1e3/60/60<=72}},{key:"CalculatePercentage",value:function(e,t){return 0==e||0==t?0:(t/e*100).toFixed(2)}},{key:"render",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement(T.a,null,o.a.createElement(c.a,{md:"12"},o.a.createElement(h.a,null,o.a.createElement(g.a,null,o.a.createElement(m.a,{tag:"h4"},"QC Report")),o.a.createElement(P.a,null,0==this.state.nodes.length?o.a.createElement("i",{class:"fa fa-spinner fa-spin"}):o.a.createElement(r.Suspense,{fallback:o.a.createElement("div",null,"Loading...")},o.a.createElement(C,{tableData:this.state.nodes,columns:p,control:b})))))))}}]),a}(o.a.Component);t.default=v}}]);
//# sourceMappingURL=122.555bf23d.chunk.js.map