(this.webpackJsonpMatrix_Dashboard=this.webpackJsonpMatrix_Dashboard||[]).push([[87],{1322:function(e,a,t){"use strict";t.r(a);var n=t(39),r=t(40),o=t(121),s=t(42),i=t(41),l=t(0),d=t.n(l),u=t(1261),c=t(1262),m=t(1336),p=t(420),h=t(432),b=t(124),y=t(30),f=t(431),v=t(90),g=t(430),D=(t(427),t(530)),S=t(424),C=t(531),_=t(533),I=t(563),E=t(532),O=function(e){Object(s.a)(t,e);var a=Object(i.a)(t);function t(e){var r;Object(n.a)(this,t),(r=a.call(this,e)).handleChange=function(e,a){var t=r.state.formvalue;e.target&&"checkbox"==e.target.type?t[e.target.id]=e.target.checked:e._isAMomentObject?t[a]=e.format():t[e.target.id]=e.target.value,r.setState({formvalue:t})},r.state={isLoaded:!1,showModal:!1,items:[],store:[],activePage:1,root:"InboundQueueMaster",PageTitle:"Inbound Queue Master",FormTitle:"",formvalue:{},event:"",errors:{},fields:{}},r.handleClose=r.handleClose.bind(Object(o.a)(r)),r.handleShow=r.handleShow.bind(Object(o.a)(r)),r.handleSave=r.handleSave.bind(Object(o.a)(r)),r.handleChange=r.handleChange.bind(Object(o.a)(r)),r.handleValidation=r.handleValidation.bind(Object(o.a)(r)),r.selectedrow={id:0,queuename:"",queue_ring_time:"",ctc_queue_ring_time:"",master_queuename:"",master_queue_ring_time:"",product:"",mdProduct:"",group_name:"",type:"",is_ctc:"",IsMobile:"",IsClaim:"",ctc_process_type:"",server_ip:"",callWaitTime:"",dialRingTime:"",startTime:"",endTime:"",agentsDial:"",isGroupMasterQueue:""},r.columnlist=[{name:"id",label:"ID",type:"hidden",hide:!0},{name:"queuename",label:"Queue Name",searchable:!1,required:!0,type:"string",editable:!1},{name:"master_queuename",label:"Master Queue Name",searchable:!1,type:"string"},{name:"product",label:"Product",type:"dropdown",config:{root:"Products",cols:["ID AS Id","ProductName AS Display"],con:[{Isactive:1}]},required:!0,searchable:!0},{name:"mdProduct",label:"Md Product",type:"dropdown",config:{root:"Products",cols:["ID AS Id","ProductName AS Display"],con:[{Isactive:1}]},searchable:!1},{name:"group_name",label:"Group Name",type:"dropdown",searchable:!0,config:{root:"groupname",data:[{Id:"inbound",Display:"inbound"},{Id:"predictive",Display:"predictive"}]}},{name:"type",label:"Type",type:"dropdown",searchable:!0,config:{root:"type",data:[{Id:"sales",Display:"sales"},{Id:"service",Display:"service"},{Id:"claim",Display:"claim"}]},required:!0},{name:"ctc_process_type",label:"Ctc Process Type",type:"dropdown",searchable:!0,config:{root:"ctc_process_type",data:[{Id:"old",Display:"old"},{Id:"new",Display:"new"}]},required:!0},{name:"server_ip",label:"Server IP",searchable:!1,required:!0,type:"string"},{name:"queue_ring_time",label:"Queue Ring Time",searchable:!1,type:"string"},{name:"ctc_queue_ring_time",label:"Ctc Queue Ring Time",searchable:!1,type:"string"},{name:"master_queue_ring_time",label:"Master Queue Ring Time",searchable:!1,type:"string"},{name:"callWaitTime",label:"Call Wait Time",searchable:!1,type:"string"},{name:"dialRingTime",label:"Dial Ring Time",searchable:!1,type:"string"},{name:"startTime",label:"Start Time",searchable:!1,type:"string"},{name:"endTime",label:"End Time",searchable:!1,type:"string"},{name:"agentsDial",label:"Agents Dial",searchable:!1,type:"string"},{name:"is_ctc",label:"IsCtc",searchable:!1,type:"bool"},{name:"IsMobile",label:"IsMobile",searchable:!1,type:"bool"},{name:"IsClaim",label:"IsClaim",searchable:!1,type:"bool"},{name:"isGroupMasterQueue",label:"IsGroupMasterQueue",searchable:!1,type:"bool"}];return r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.columnlist.map((function(a){return Object(v.c)(a,e.props)})),this.props.GetMySqlData({root:this.state.root,order:"id",con:{isActive:1}},function(e){}.bind(this))}},{key:"fnBindStore",value:function(e,a){var t;"dropdown"==e.type&&(a.CommonData[this.state.root]&&a.CommonData[e.config.root]&&(t=Object(v.l)(a.CommonData[this.state.root],a.CommonData[e.config.root],e.name),this.setState({items:t})))}},{key:"componentWillReceiveProps",value:function(e){var a=this;e.CommonData.isError||(this.setState({items:e.CommonData[this.state.root]}),this.setState({store:e.CommonData}),this.columnlist.map((function(t){return a.fnBindStore(t,e)}))),e.CommonData&&e.CommonData.InsertSuccessData&&e.CommonData.InsertSuccessData.status&&200!=e.CommonData.InsertSuccessData.status&&alert(e.CommonData.InsertSuccessData.error),e.CommonData&&e.CommonData.UpdateSuccessData&&e.CommonData.UpdateSuccessData.status&&200!=e.CommonData.UpdateSuccessData.status&&alert(e.CommonData.UpdateSuccessData.error)}},{key:"fnDatatableCol",value:function(){var e=this,a=Object(v.e)(this.columnlist);return a.unshift({name:"Action",width:"150px",cell:function(a){return d.a.createElement(u.a,{"aria-label":"Basic example"},d.a.createElement(c.a,{variant:"secondary",onClick:function(){return e.handleEdit(a)}},d.a.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})),d.a.createElement(c.a,{variant:"secondary",onClick:function(){window.confirm("Are you sure you wish to delete this queue?")&&e.handleDelete(a)}},d.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"})))}}),a}},{key:"handleEdit",value:function(e){this.setState({od:Object.assign({},e,{}),formvalue:e,event:"Edit",showModal:!0,FormTitle:"Edit Record"})}},{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"handleShow",value:function(){this.setState({formvalue:this.selectedrow,event:"Add",showModal:!0,FormTitle:"Add New Record"})}},{key:"handleDelete",value:function(e){this.setState({od:Object.assign({},e,{}),formvalue:e}),this.props.UpdateData({root:this.state.root,body:{isActive:0},querydata:{id:e.id}},(function(e){200===e.data.status?Object(g.b)("Queue removed successfully!",{type:"success"}):g.b.error("Queue could not be removed")})),this.props.addRecord({root:"History",body:{module:"InboundQueueMaster",action:"Delete",od:this.state.od,nd:{isActive:0},ts:new Date,by:Object(v.j)().UserID}})}},{key:"handleSave",value:function(){var e=JSON.parse(JSON.stringify(this.state.formvalue));if(this.handleValidation(e)){if(this.fnCleanData(e,!0),"Edit"==this.state.event){var a=e.id;delete e.id,this.fnCleanData(e,!0),this.props.UpdateData({root:this.state.root,body:e,querydata:{id:a}},(function(e){200===e.data.status?Object(g.b)("Queue updated successfully!",{type:"success"}):g.b.error("Queue could not be updated")})),this.props.addRecord({root:"History",body:{module:"InboundQueueMaster",action:"Edit",od:this.state.od,nd:e,ts:new Date,by:Object(v.j)().UserID}}),this.props.UpdateData({root:"CampaignRoute",body:{server_ip:e.server_ip},querydata:{campaign_name:e.queuename}}),this.props.UpdateData({root:"QueueRoute",body:{serverip:e.server_ip,isMobile:e.IsMobile},querydata:{queuename:e.queuename}})}else{var t=JSON.parse(JSON.stringify(this.state.formvalue));delete t.id,this.fnCleanData(t,!1),this.props.InsertData({root:this.state.root,body:t},(function(e){200===e.data.status?Object(g.b)("Queue added successfully!",{type:"success"}):g.b.error("Queue could not be added")})),this.props.addRecord({root:"History",body:{module:"InboundQueueMaster",action:"Add",od:{},nd:t,ts:new Date,by:Object(v.j)().UserID}}),this.props.InsertData({root:"CampaignRoute",body:{campaign_name:t.queuename,server_ip:t.server_ip,context:t.queuename}}),this.props.InsertData({root:"QueueRoute",body:{queuename:t.queuename,serverip:t.server_ip,isMobile:t.IsMobile}})}this.setState({showModal:!1})}}},{key:"handleValidation",value:function(e){var a=!0;return e.queuename||(a=!1,g.b.error("Queue name field is required")),e.product||(a=!1,g.b.error("Product field is required")),e.group_name||(a=!1,g.b.error("Group name field is required")),e.type||(a=!1,g.b.error("Type field is required")),e.ctc_process_type||(a=!1,g.b.error("CTC process type field is required")),e.server_ip||(a=!1,g.b.error("Server IP field is required")),a}},{key:"fnCleanData",value:function(e,a){e=Object(v.d)(this.columnlist,e,a),this.setState({formvalue:e})}},{key:"render",value:function(){var e=this,a=this.fnDatatableCol(),t=this.state,n=t.items,r=t.PageTitle,o=t.showModal,s=t.FormTitle,i=t.formvalue,l=t.event;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"content"},d.a.createElement(g.a,null),d.a.createElement(D.a,null,d.a.createElement(S.a,{md:"12"},d.a.createElement(C.a,null,d.a.createElement(_.a,null,d.a.createElement(D.a,null,d.a.createElement(S.a,{md:11},d.a.createElement(I.a,{tag:"h4"},r)),d.a.createElement(S.a,{md:1},d.a.createElement(c.a,{variant:"primary",onClick:this.handleShow},"ADD")))),d.a.createElement(E.a,null,d.a.createElement(f.a,{columns:a,data:n}))))),d.a.createElement(m.a,{show:o,onHide:this.handleClose,dialogClassName:"modal-90w"},d.a.createElement(m.a.Header,{closeButton:!0},d.a.createElement(m.a.Title,null,s)),d.a.createElement(m.a.Body,null,d.a.createElement(p.a,null,d.a.createElement(D.a,null,this.columnlist.map((function(a){return Object(v.f)(a,i,e.handleChange,l)}))))),d.a.createElement(m.a.Footer,null,d.a.createElement(c.a,{variant:"secondary",onClick:this.handleClose},"Close"),d.a.createElement(c.a,{variant:"primary",onClick:this.handleSave},"Save Changes")))))}}]),t}(d.a.Component);a.default=Object(y.b)((function(e){return{CommonData:e.CommonData}}),{GetCommonData:b.b,GetMySqlData:h.b,InsertData:h.c,UpdateData:h.d,addRecord:b.d})(O)},427:function(e,a,t){},432:function(e,a,t){"use strict";t.d(a,"b",(function(){return d})),t.d(a,"c",(function(){return u})),t.d(a,"d",(function(){return c})),t.d(a,"a",(function(){return m}));var n=t(4),r=t.n(n),o=t(1),s=t(9),i=function(e){return e.dataToSend.state&&e.dataToSend.statename&&localStorage.setItem(e.dataToSend.statename,JSON.stringify(e.data)),{type:s.a.GET_COMMON_SUCCESS,payload:e.data,root:e.dataToSend.root}},l=function(e){return{type:s.a.GET_COMMON_FAIL,payload:e}},d=function(e,a){if(null!=e.data||void 0!=e.data)return function(a,t){a(i({data:e.data,dataToSend:e}))};try{if(e.state&&localStorage.getItem(e.statename)||localStorage.getItem(e.statename))return function(a,t){var n=JSON.parse(localStorage.getItem(e.statename));a(i({data:n,dataToSend:e}))}}catch(t){}return function(t,n){r.a.get(o.a.api.base_url+"/mydb/list/",{params:e}).then((function(n){e.state&&e.statename&&localStorage.setItem(e.statename,JSON.stringify(n.data.data)),a&&a(n),t(i({data:n.data.data[0],dataToSend:e}))})).catch((function(e){t(l(e))}))}},u=function(e,a){return function(t,n){r.a.post(o.a.api.base_url+"/mydb/insert/",{data:e}).then((function(e){var n;a&&a(e),t((n={data:e.data},{type:s.a.INSERT_COMMON_SUCCESS,payload:n.data}))})).catch((function(e){t(function(e){return{type:s.a.INSERT_COMMON_FAIL,payload:e}}(e))}))}},c=function(e,a){return function(t,n){r.a.post(o.a.api.base_url+"/mydb/update/",{data:e}).then((function(e){var n;a&&a(e),t((n={data:e.data},{type:s.a.UPDATE_COMMON_SUCCESS,payload:n.data}))})).catch((function(e){t(function(e){return{type:s.a.UPDATE_COMMON_FAIL,payload:e}}(e))}))}},m=function(e,a){try{if(e.state&&localStorage.getItem(e.statename)||localStorage.getItem(e.statename)){var t=JSON.parse(localStorage.getItem(e.statename));return void a(t)}}catch(n){}r.a.get(o.a.api.base_url+"/mydb/list/",{params:e}).then((function(t){e.state&&e.statename&&localStorage.setItem(e.statename,JSON.stringify(t.data.data)),a(t.data.data)})).catch((function(e){}))}}}]);
//# sourceMappingURL=87.844f64a8.chunk.js.map