{"version":3,"sources":["views/chatRoomHistory.jsx"],"names":["Message","props","console","log","time","Date","mesg","msg","indexOf","href","target","className","name","toLocaleTimeString","chatRoomHistory","state","messages","PageTitle","rid","getUrlParameter","GetChatMessages","result","data","Array","isArray","setState","tdate","this","ts","toLocaleDateString","md","tag","length","map","message","React","Component","connect","CommonData","GetCommonData","InsertData","UpdateData","DeleteData"],"mappings":"0TA6BMA,EAAU,SAACC,GACbC,QAAQC,IAAI,aAAeF,GAC3B,IAAIG,EAAO,IAAIC,KAAKJ,EAAMG,MACtBE,EAAO,GAMX,OAJEA,EADiC,GAAhCL,EAAMM,IAAIC,QAAQ,YAAoD,GAAjCP,EAAMM,IAAIC,QAAQ,YAClD,uBAAGC,KAAMR,EAAMM,IAAKG,OAAO,QAAQC,UAAU,aAAY,gCAASV,EAAMM,MAEtEN,EAAMM,IAER,yBAAKI,UAAU,eACnB,2BAAIV,EAAMW,MADN,IACgB,0BAAMD,UAAU,YAAhB,IAA6BP,EAAKS,sBACtD,6BACA,2BAAIP,KAINQ,E,kDACJ,WAAYb,GAAQ,IAAD,8BACjB,cAAMA,IACDc,MAAQ,CACbC,SAAU,GACVC,UAAW,gBAJM,E,8CAQrB,WACEf,QAAQC,IAAI,uB,+BAIZ,WAAqB,IAAD,OACde,EAAMC,YAAgB,OAuB1BC,YAAgBF,GAAK,SAACG,GAClBnB,QAAQC,IAAI,cAAekB,EAAOC,KAAKA,MACpCC,MAAMC,QAAQH,EAAOC,KAAKA,OAC3B,EAAKG,UAAS,iBAAO,CACnBT,SAAUK,EAAOC,KAAKA,c,oBAMhC,WACE,IAEII,EAFJ,EAAgCC,KAAKZ,MAA7BC,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,UAOlB,OANAf,QAAQC,IAAI,yBAA0Ba,GAEnCA,GAAYA,EAAS,KAEpBU,GADAA,EAAQ,IAAIrB,KAAKW,EAAS,GAAGY,KACfC,sBAGhB,oCACE,yBAAKlB,UAAU,WACb,kBAAC,IAAD,MACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKmB,GAAG,KACN,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKA,GAAI,IACP,kBAAC,IAAD,CAAWC,IAAI,MAAMd,MAI3B,kBAAC,IAAD,KACoB,GAAjBD,EAASgB,OAAY,gDACpB,oCACA,qDAA2BN,GAAO,kCAAQA,EAAR,MAE5B,yBAAKf,UAAU,gBACVK,GAAYA,EAASiB,KAAI,SAACC,GACvB,OACI,kBAAClC,EAAD,CACIO,IAAK2B,EAAQ3B,IACbK,KAAMsB,EAAQtB,KACdR,KAAM8B,EAAQN,oB,GAjF1BO,IAAMC,WAyGrBC,uBANf,SAAyBtB,GACvB,MAAO,CACLuB,WAAYvB,EAAMuB,cAMpB,CACEC,kBACAC,eACAC,eACAC,gBANWL,CAQbvB","file":"static/js/125.6e400565.chunk.js","sourcesContent":["\nimport React from \"react\";\nimport { ButtonGroup, Button, Modal, Form } from 'react-bootstrap';\nimport moment from 'moment';\nimport config from '../config'\n\nimport { GetCommonData, InsertData, UpdateData, DeleteData, GetChatMessages} from \"../store/actions/CommonAction\";\n\nimport { If, Then } from 'react-if';\n\nimport { connect } from \"react-redux\";\nimport DataTable from './Common/DataTableWithFilter';\nimport DropDown from './Common/DropDownListMongo';\n\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport { fnRenderfrmControl, fnDatatableCol, fnCleanData, GetJsonToArray, getUrlParameter } from '../utility/utility.jsx';\n// reactstrap components\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  CardTitle,\n  Row,\n  Col\n} from \"reactstrap\";\nimport { getuser } from \"utility/utility\";\n\nconst Message = (props) => {\n    console.log('-----props' , props);\n    let time = new Date(props.time);\n    let mesg = '';\n    if(props.msg.indexOf(\"http://\") == 0 || props.msg.indexOf(\"https://\") == 0) {\n      mesg= <a href={props.msg} target=\"blank\" className=\"date-line\"><strong>{props.msg}</strong></a> ;\n    } else {\n        mesg= props.msg;\n    }\n    return (<div className=\"chatPattern\">\n        <b>{props.name}</b> <span className=\"msg-time\"> {time.toLocaleTimeString()}</span>\n        <br/>\n        <p>{mesg}</p>\n    </div>)\n} \n\nclass chatRoomHistory extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    messages: [],\n    PageTitle: \"Chat History\"\n    }\n}\n\ngetMessage(){\n  console.log('/////////////////');\n}\n\n\n  componentDidMount() {\n    let rid = getUrlParameter(\"rid\");\n    // let url = localStorage.getItem(\"apiUrl\")\n    //                 // ? localStorage.getItem(\"apiUrl\")\n    //                 // : \"https://chatapiv2.policybazaar.com/api/v1\";\n    //                 // let url = config.api.chatAgentUrl\n    //                 // let url = \"http://localhost:8081/api/v1\" ;  \n    // url = url + \"chat/getChatMessagesUsingRoom/\" + rid;\n    // console.log(url);\n    // fetch(url, {\n    //     method: \"GET\",\n    //     headers: { \"Content-Type\": \"application/json\" },\n    //     timeout: 200000,\n    // })\n    //     .then((resp) => resp.json())\n    //     .then( (result) => {\n    //         console.log('-----result', result); \n    //         this.setState(() => ({\n    //             messages: result.data\n    //         }));\n    //     })\n    //     .catch(function (err) {\n    //         console.log(\"-0-00-0-0-----\", err);\n    //     });\n    GetChatMessages(rid, (result) => {\n        console.log('-----result', result.data.data);\n        if(Array.isArray(result.data.data)){\n          this.setState(() => ({\n            messages: result.data.data\n          }));\n        }\n    });\n  }\n\n  render() {\n    const { messages, PageTitle } = this.state;\n    console.log('-------messages-------', messages); \n    let tdate; \n    if(messages && messages[0]){\n        tdate = new Date(messages[0].ts); \n        tdate = tdate.toLocaleDateString();\n    }\n    return (\n      <>\n        <div className=\"content\">\n          <ToastContainer />\n          <Row>\n            <Col md=\"8\">\n              <Card>\n                <CardHeader>\n                  <Row>\n                    <Col md={10}>\n                      <CardTitle tag=\"h3\">{PageTitle}</CardTitle>\n                    </Col>\n                  </Row>\n                </CardHeader>\n                <CardBody>\n                  {messages.length==0 ? <h6>no message found</h6> :\n                    <> \n                    <h6>Start of conversation {tdate&&<span>({tdate})</span>}</h6>\n                      {/* <ul aria-live=\"polite\"> */}\n                          <div className=\"main-section\">\n                              {messages && messages.map((message) => {\n                                  return (\n                                      <Message\n                                          msg={message.msg}\n                                          name={message.name}\n                                          time={message.ts}\n                                      />\n                                  )\n                              })}\n                          </div>\n                      {/* </ul> */}\n                    </>}\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n        </div>\n      </>\n    );\n  }\n}\n\n\nfunction mapStateToProps(state) {\n  return {\n    CommonData: state.CommonData\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  {\n    GetCommonData,\n    InsertData,\n    UpdateData,\n    DeleteData\n  }\n)(chatRoomHistory);"],"sourceRoot":""}