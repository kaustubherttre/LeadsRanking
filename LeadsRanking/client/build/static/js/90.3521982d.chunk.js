(this.webpackJsonpMatrix_Dashboard=this.webpackJsonpMatrix_Dashboard||[]).push([[90],{1334:function(e,a,t){"use strict";t.r(a);var n=t(123),r=t(5),s=t(39),o=t(40),l=t(121),i=t(42),m=t(41),c=t(0),d=t.n(c),u=t(1261),h=t(1262),p=t(420),f=t(1336),v=t(124),b=t(428),g=t(30),C=t(90),w=t(449),y=t.n(w),E=t(530),D=t(424),S=t(531),O=t(533),j=t(563),U=t(532),A=t(430),k=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).handleSave=function(){if(document.getElementsByName("frmChatUsers").length>0&&document.getElementsByName("frmChatUsers")[0].reportValidity()){var e=JSON.parse(JSON.stringify(n.state.formvalue)),a=e._id;if("Edit"==n.state.event){delete e.password,n.fnCleanData(e);n.props.UpdateData({root:n.state.root,body:e,querydata:{_id:a},c:"R"},(function(e){Object(A.b)("Record Saved Successfully!",{type:"success"})}))}else n.props.addRecord({root:"users",body:{module:"",od:n.state.od,nd:e,ts:new Date,by:Object(C.j)().UserID}})}},n.handleChange=function(e,a){var t=n.state.formvalue;n.state.od;e.target&&"checkbox"==e.target.type?t[e.target.id]=e.target.checked:e._isAMomentObject?t[a]=e.format():"multiselect"==e.type?t[e.id]=e.newselectedList&&e.newselectedList.length?e.newselectedList.map((function(e){return e.value})):[]:t[e.target.id]="number"===e.target.type?parseInt(e.target.value):e.target.value,n.setState({formvalue:t,ModalValueChanged:!0})},n.searchAgent=function(e){n.setState({search:e.target.value})},n.getUsers=function(){var e=[],a=n.inputElement.value;a&&e.push({username:a}),n.props.GetCommonData({limit:20,skip:0,root:n.state.root,cols:JSON.stringify(["name","username","emails","verified","manager","requirePasswordChange","employeeId","domainusername","roles"]),con:e,c:"R"}),n.props.GetCommonData({limit:20,skip:0,root:"livechat_department_agents",cols:JSON.stringify(["departmentId"]),con:e,c:"R"})},n.handleClose=function(e){n.setState({showModal:!1})},n.state={isLoaded:!1,showModal:!1,useraction:"",showUpdateModal:!1,items:[],activePage:1,root:"users",PageTitle:" Users",FormTitle:"New Users",formvalue:{},event:"",depId:[],search:"",showAlert:!1,AlertMsg:"",AlertVarient:"",assignedDepartments:[]},n.handleClose=n.handleClose.bind(Object(l.a)(n)),n.handleShow=n.handleShow.bind(Object(l.a)(n)),n.handleSave=n.handleSave.bind(Object(l.a)(n)),n.searchAgent=n.searchAgent.bind(Object(l.a)(n)),n.getUsers=n.getUsers.bind(Object(l.a)(n)),n.selectedrow={name:"",username:"",domainusername:"",emails:"",manager:"",employeeId:"",department:[],password:"",verified:!0,requirePasswordChange:!1,role:[]},n.list=[{name:"Names",label:"Names",selector:"name"},{name:"Username",label:"Usernames",selector:"username"},{name:"Emails",label:"Emails",selector:"emails"},{name:"Manager",label:"ManagerId",selector:"manager"}],n.columnlist=[{name:"_id",label:"id",type:"hidden",hide:!0},{name:"name",label:"Name"},{name:"username",label:"Username",editable:!1},{name:"domainusername",label:"Domain Username",editable:!1},{name:"emails",label:"Emails"},{name:"manager",label:"Manager(EmpId)"},{name:"employeeId",label:"EmployeeId"},{name:"department",label:"Department",selector:"department",type:"multiselectMongo",config:{root:"livechat_department",cols:JSON.stringify(["_id","name"]),con:{},state:!0}},{name:"password",label:"Password",editable:!1},{name:"role",label:"Role",type:"multiselectMongo",config:{root:"roles",cols:JSON.stringify(["_id","name"]),con:{}}},{name:"verified",label:"Verified",type:"hidden",hide:!0},{name:"requirePasswordChange",label:"Require Password Changes",type:"hidden",hide:!0}],n}return Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(!e.CommonData.isError){var a=e.CommonData.livechat_department_agents,t=a&&a.map((function(e){return e.departmentId})),n=e.CommonData[this.state.root];n&&n.map((function(e){return e.department=t}));var r=n?n.map((function(e){return{_id:e._id,name:e.name||"--",verified:e.emails?e.emails[0].verified:"",employeeId:e.employeeId,requirePasswordChange:e.requirePasswordChange,domainusername:e.domainusername||"--",department:e.department?e.department.map((function(e){return{label:e,value:e}})):null,role:e.roles?e.roles.map((function(e){return{label:e,value:e}})):null,username:e.username||"--",manager:e.manager||"--",emails:e.emails&&e.emails[0]&&e.emails[0].address?e.emails[0].address:"--"}})):[];this.setState({items:r}),this.setState({showAlert:!1})}e.CommonData&&e.CommonData.InsertSuccessData&&e.CommonData.InsertSuccessData.status&&(200!=e.CommonData.InsertSuccessData.status?(alert(e.CommonData.InsertSuccessData.message||e.CommonData.InsertSuccessData.error),e.CommonData.InsertSuccessData=[]):(this.setState({showModal:!1}),this.setState({showAlert:!0,AlertMsg:"Record Add Successfully.",AlertVarient:"success"}),e.CommonData.InsertSuccessData=[])),e.CommonData&&e.CommonData.UpdateSuccessData&&e.CommonData.UpdateSuccessData.status&&(200!=e.CommonData.UpdateSuccessData.status?(alert(e.CommonData.UpdateSuccessData.message||e.CommonData.UpdateSuccessData.error),e.CommonData.UpdateSuccessData=[],this.setState({showModal:!0})):(this.setState({showModal:!1}),this.setState({showAlert:!0,AlertMsg:"Record Updated Successfully.",AlertVarient:"success"}),e.CommonData.UpdateSuccessData=[]))}},{key:"handleShow",value:function(){this.setState({showAlert:!1,useraction:"SAVE",formvalue:Object(r.a)({},this.selectedrow),event:"Add",showModal:!0,FormTitle:"New User"})}},{key:"handleEdit",value:function(e){this.setState({formvalue:e,useraction:"UPDATE",event:"Edit",showModal:!0,FormTitle:"Edit Record"})}},{key:"fnDatatableCol",value:function(){var e=this;return this.list.push({name:"Action",cell:function(a){return d.a.createElement(u.a,{"aria-label":"Basic example"},d.a.createElement(h.a,{variant:"secondary",onClick:function(){return e.handleEdit(a)}},d.a.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})))}}),this.list}},{key:"fnCleanData",value:function(e){e=Object(C.d)(this.columnlist,e),this.setState({formvalue:e})}},{key:"render",value:function(){var e=this,a=this.fnDatatableCol(),t=this.state,n=t.items,r=(t.search,t.useraction),s=t.PageTitle,o=t.showModal,l=(t.showUpdateModal,t.FormTitle),i=t.formvalue,m=t.showAlert,c=t.AlertVarient,u=t.AlertMsg;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"content"},d.a.createElement(b.a,{show:m,variant:c,body:u}),d.a.createElement(E.a,null,d.a.createElement(D.a,{md:"12"},d.a.createElement(S.a,null,d.a.createElement(O.a,null,d.a.createElement(E.a,null,d.a.createElement(D.a,{md:11},d.a.createElement(j.a,{tag:"h4"},s)),d.a.createElement(D.a,{md:"4"},d.a.createElement(p.a.Control,{type:"text",ref:function(a){e.inputElement=a},placeholder:"Enter Username"})),d.a.createElement(D.a,{md:1},d.a.createElement(h.a,{variant:"primary",onClick:this.getUsers},"Fetch")),d.a.createElement(D.a,{md:2},d.a.createElement(h.a,{variant:"primary",onClick:this.handleShow},"ADD USER")))),d.a.createElement(U.a,null,d.a.createElement(y.a,{columns:a,data:n,defaultSortFieldId:1,pagination:!0,striped:!0,highlightOnHover:!0}))))),d.a.createElement(f.a,{show:o,onHide:this.handleClose,dialogClassName:"modal-90w"},d.a.createElement(f.a.Header,{closeButton:!0},d.a.createElement(f.a.Title,null,l)),d.a.createElement(f.a.Body,null,d.a.createElement(p.a,{name:"frmChatUsers"},d.a.createElement(E.a,null,this.columnlist.map((function(a){return Object(C.f)(a,i,e.handleChange,e.state.event)}))))),d.a.createElement(f.a.Footer,null,d.a.createElement(h.a,{variant:"secondary",onClick:this.handleClose},"Close"),d.a.createElement(h.a,{variant:"primary",onClick:this.handleSave},r)))))}}]),t}(d.a.Component);a.default=Object(g.b)((function(e){return{CommonData:e.CommonData}}),Object(n.a)({GetCommonData:v.b,addRecord:v.d,UpdateData:v.c},"addRecord",v.d))(k)},426:function(e,a,t){"use strict";e.exports=function(e,a,t,n,r,s,o,l){if(!e){var i;if(void 0===a)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var m=[t,n,r,s,o,l],c=0;(i=new Error(a.replace(/%s/g,(function(){return m[c++]})))).name="Invariant Violation"}throw i.framesToPop=1,i}}},428:function(e,a,t){"use strict";var n=t(39),r=t(40),s=t(42),o=t(41),l=t(0),i=t.n(l),m=t(440),c=function(e){Object(s.a)(t,e);var a=Object(o.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).state={show:r.props.show},r}return Object(r.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState({show:e.show}),e.show&&setTimeout(function(){this.setState({show:!1})}.bind(this),5e3)}},{key:"render",value:function(){return this.state.show?i.a.createElement(m.a,{variant:this.props.variant},this.props.body):null}}]),t}(i.a.Component);a.a=c},440:function(e,a,t){"use strict";var n=t(3),r=t(7),s=t(8),o=t.n(s),l=t(0),i=t.n(l);t(426);function m(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function c(e){var a=function(e,a){if("object"!==typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,a||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"===typeof a?a:String(a)}function d(e,a){return Object.keys(a).reduce((function(t,s){var o,i=t,d=i[m(s)],u=i[s],h=Object(r.a)(i,[m(s),s].map(c)),p=a[s],f=function(e,a,t){var n=Object(l.useRef)(void 0!==e),r=Object(l.useState)(a),s=r[0],o=r[1],i=void 0!==e,m=n.current;return n.current=i,!i&&m&&s!==a&&o(a),[i?e:s,Object(l.useCallback)((function(e){for(var a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];t&&t.apply(void 0,[e].concat(n)),o(e)}),[t])]}(u,d,e[p]),v=f[0],b=f[1];return Object(n.a)({},h,((o={})[s]=v,o[p]=b,o))}),e)}t(23),t(433);var u=t(435),h=t(10),p=t(439),f=t(437),v=t(438),b=t(122),g=t(436),C=["bsPrefix","show","closeLabel","className","children","variant","onClose","dismissible","transition"],w=Object(v.a)("h4");w.displayName="DivStyledAsH4";var y=Object(b.a)("alert-heading",{Component:w}),E=Object(b.a)("alert-link",{Component:g.a}),D={show:!0,transition:p.a,closeLabel:"Close alert"},S=i.a.forwardRef((function(e,a){var t=d(e,{show:"onClose"}),s=t.bsPrefix,l=t.show,m=t.closeLabel,c=t.className,v=t.children,b=t.variant,g=t.onClose,w=t.dismissible,y=t.transition,E=Object(r.a)(t,C),D=Object(h.a)(s,"alert"),S=Object(u.a)((function(e){g&&g(!1,e)})),O=!0===y?p.a:y,j=i.a.createElement("div",Object(n.a)({role:"alert"},O?void 0:E,{ref:a,className:o()(c,D,b&&D+"-"+b,w&&D+"-dismissible")}),w&&i.a.createElement(f.a,{onClick:S,label:m}),v);return O?i.a.createElement(O,Object(n.a)({unmountOnExit:!0},E,{ref:void 0,in:l}),j):l?j:null}));S.displayName="Alert",S.defaultProps=D,S.Link=E,S.Heading=y;a.a=S}}]);
//# sourceMappingURL=90.3521982d.chunk.js.map