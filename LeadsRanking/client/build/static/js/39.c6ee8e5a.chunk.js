(this.webpackJsonpMatrix_Dashboard=this.webpackJsonpMatrix_Dashboard||[]).push([[39],{1300:function(e,t,a){"use strict";a.r(t);var n=a(123),o=a(39),i=a(40),s=a(121),r=a(42),l=a(41),c=a(0),d=a.n(c),u=a(61),m=a(432),p=a(30),f=a(90),h=a(446),v=a(64),y=a(431),g=a(448),b=(a(441),a(91)),D=a.n(b),S=a(51),E=a.n(S),I=(a(425),a(428)),C=(a(1),a(430)),M=(a(427),a(92)),O=(a(187),a(530)),k=a(424),T=a(531),j=a(533),Y=a(563),_=a(532),N=a(420),w=a(1262),L=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){e._isAMomentObject&&n.setState({ReportDate:e.format("YYYY-MM-DD")},(function(){this.fetchCallBackData()}))},n.handleStartDateChange=function(e,t){e._isAMomentObject&&n.setState({startdate:e.format("YYYY-MM-DD")},(function(){}))},n.handleEndDateChange=function(e,t){e._isAMomentObject&&n.setState({enddate:e.format("YYYY-MM-DD")},(function(){}))},n.validation=function(e){return!e.isBefore(E()(n.state.maxdate))},n.validationEndDate=function(e){return!e.isBefore(E()(n.state.startdate))},n.state={root:"queueAbandonData",PageTitle:"Mobile Calling Report",ProductData:[],ProductId:0,ReportDate:E()().subtract(1,"days").format("YYYY-MM-DD"),ReportTime:null,startdate:E()().format("YYYY-MM-DD"),enddate:E()().format("YYYY-MM-DD"),maxdate:E()().subtract(60,"days").format("YYYY-MM-DD"),showMoreInfoModal:!1,MoreInfoData:[],addClass:"fa fa-play-circle",selectedIvrProduct:"",ivrType:"0",ivrProducts:[],ivrQueues:[],SelectedQueues:[],queueServerIp:"",selectedValue:[{label:"Select IVR Queues",value:"0"}],ConfType:"",addClassDisabled:"",confTypes:[]},n.ivrtypechange=n.ivrtypechange.bind(Object(s.a)(n)),n.ivrproductchange=n.ivrproductchange.bind(Object(s.a)(n)),n.conftypechange=n.conftypechange.bind(Object(s.a)(n)),n.onSelect=n.onSelect.bind(Object(s.a)(n)),n.columnlist=[{name:"CallId",selector:"callid",width:"150px",type:"string",cell:function(e){return d.a.createElement("div",{className:"callid"},e.callid?e.callid:"N.A")}},{name:"LeadId",selector:"leadid",searchable:!0},{name:"dstchannel",selector:"dstchannel",hidden:!0},{name:"userfield",selector:"userfield",hidden:!0},{name:"queuename",selector:"queuename",searchable:!0},{name:"ConfType",selector:"conference_type",cell:function(e){return d.a.createElement("div",{className:"conference_type"},e.conference_type?e.conference_type:"N.A")}},{name:"Calldate",selector:"calldate",cell:function(e){return d.a.createElement("div",{className:"calldate"},e.calldate?d.a.createElement(D.a,{utc:!0,format:"YYYY-MM-DD HH:mm:ss"},e.calldate):"N.A")},type:"datetime",sortable:!0,width:"150px"},{name:"agentid",selector:"agentid",searchable:!0},{name:"agentno",selector:"agentno",searchable:!0},{name:"duration",selector:"ringtime",searchable:!0},{name:"disposition",selector:"custom_disposition",type:"dropdown",searchable:!0,config:{root:"custom_disposition",state:!0,statename:"custom_disposition",data:[{Id:"ANSWERED",Display:"ANSWERED"},{Id:"NO ANSWER",Display:"NO ANSWER"},{Id:"BUSY",Display:"BUSY"},{Id:"FAILED",Display:"FAILED"}]}},{name:"Listen",cell:function(e){return["Playback","Hangup"].indexOf(e.custom_disposition)>-1?"No file found":d.a.createElement("div",{className:"listen"},n.getHtmlListenMoreInfo(e))},width:"150px"}],n.IvrTypeList={config:{root:"Ivrtypelist",data:[{Id:"Service",Display:"Service"},{Id:"Sales",Display:"Sales"},{Id:"Claim",Display:"Claim"}]}},n.ConfTypeList={config:{root:"Conftypelist",data:[{Id:"sales_to_service",Display:"Life Hot Call Transfer"},{Id:"telimedical",Display:"Teli-Medical [BMS Transfer]"},{Id:"telemax",Display:"Tele-Max"},{Id:"tltransfer",Display:"TLTransfer"},{Id:"0",Display:"Other"}]}},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.GetMySqlData({root:"getConferenceType"},function(e){this.setState({confTypes:e.data.data[0]})}.bind(this))}},{key:"componentWillMount",value:function(){}},{key:"fnBindStore",value:function(e,t){var a;"dropdown"==e.type&&(t.CommonData[this.state.root]&&(t.CommonData[e.config.root]||e.config.data)&&(a=Object(f.l)(t.CommonData[this.state.root],t.CommonData[e.config.root]||e.config.data,e.name),this.setState({items:a})))}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.CommonData.isError||(this.setState({items:e.CommonData[this.state.root]}),this.setState({store:e.CommonData}),console.log(e.CommonData[this.state.root]),this.columnlist.map((function(a){return t.fnBindStore(a,e)})))}},{key:"fnDatatableCol",value:function(){return Object(f.e)(this.columnlist)}},{key:"fetchAbandonData",value:function(){if(0!=this.state.ivrType)if(""!=this.state.ivrProducts)if(""!=this.state.ivrQueues){this.setState({addClassDisabled:"disabled"});var e=this.state.selectedValue,t=e.map((function(e){return e.serverip})),a=e.map((function(e){return e.label})).join("','");this.props.GetMySqlData({root:this.state.root,startdate:this.state.startdate,enddate:this.state.enddate,queues:a,conftype:this.state.ConfType,queueServerIp:t[0]},function(e){var t=this;0==e.data.data[0].length?this.setState({MobileAbandonReport:[],addClassDisabled:""}):this.setState({MobileAbandonReport:e.data.data[0],addClassDisabled:""});var a=this.props;this.columnlist.map((function(e){return t.fnBindStore(e,a)}))}.bind(this))}else Object(C.b)("Please enter ivrQueues",{type:"error"});else Object(C.b)("Please enter ivrProducts",{type:"error"});else Object(C.b)("Please enter ivrType",{type:"error"})}},{key:"fetchProductData",value:function(){this.props.GetMySqlData({root:"getProductByIvrType",ProductType:this.state.ivrType},function(e){this.setState({ivrProducts:e.data.data[0]})}.bind(this))}},{key:"fetchQueueData",value:function(){this.props.GetMySqlData({root:"getQueuesByIvrProduct",ProductType:this.state.ivrType,ProductId:this.state.selectedIvrProduct},function(e){this.setState({ivrQueues:e.data.data[0]}),1==e.data.data[0].length&&this.setState({selectedValue:e.data.data[0]})}.bind(this))}},{key:"play",value:function(e){var t=document.getElementById("audio_"+e),a=document.getElementById("play"+e);t.paused?(t.play(),a.classList.remove("fa-play-circle"),a.classList.add("fa-stop-circle")):(t.pause(),t.currentTime=0,a.classList.remove("fa-stop-circle"),a.classList.add("fa-play-circle"))}},{key:"getHtmlListenMoreInfo",value:function(e){var t=this;return d.a.createElement("span",{id:"span_"+e.row_num,onClick:function(a){return t.CreateMoreInfoRecordingURL(a,e)}},d.a.createElement("i",{class:"fa fa-play-circle listen"}))}},{key:"CreateMoreInfoRecordingURL",value:function(e,t){var a=document.getElementById("audio2"),n=t.row_num;if(a.paused){document.getElementById("span_"+n).innerHTML='<i class="fa fa-spinner fa-spin"></i>';var o=t.userfield,i=t.dstchannel,s=E()(new Date(o)).format("DD-MM-YYYY"),r=E()(new Date(o)).format("H"),l=E()(new Date(o)).format("YYYYMMDDHHmmss"),c=i.substring(i.indexOf("/")+1,i.indexOf("-")),d=t.callid;console.log(s,r,l,c,d);var m="recording/"+s+"/"+r+"/"+d+"-"+l+"-"+c+".wav";if("Invalid date"==s||"Invalid date"==r||"Invalid date"==l||null==c)return void(document.getElementById("span_"+n).innerHTML="No File Found");Object(u.e)(m,"asterisk-log",function(o){if(console.log("results",o),200==o.data.status){var i=o.data.data;a.src=o.data.data,document.getElementById("span_"+n).innerHTML='<i class="fa fa-spinner fa-spin"></i>',Object(u.m)(i,(function(o){if(o&&o.status&&404!=o.status)a.onloadedmetadata=function(){console.log(a.duration),a.play(),console.log(a.duration),0==a.paused&&a.duration>0&&"Infinity"!=a.duration&&"NaN"!=a.duration?(document.getElementById("span_"+n).innerHTML='<i class="fa fa-stop-circle listen"></i>',a.onended=function(){document.getElementById("span_"+n).innerHTML='<i class="fa fa-play-circle listen"></i>'}):document.getElementById("span_"+n).innerHTML="No File Found"};else try{document.getElementById("span_"+t.row_num).innerHTML="File not found"}catch(e){}}))}else document.getElementById("span_"+n).innerHTML="No File Found"}.bind(this))}else a.pause(),a.currentTime=0,document.getElementById("span_"+n).innerHTML='<i class="fa fa-play-circle listen"></i>'}},{key:"ivrtypechange",value:function(e,t){this.setState({ivrType:e.target.value,selectedValue:[{label:"Select IVR Queues",value:"0"}],ivrProducts:[{Display:"Select Ivr Product",Id:"0"}]},(function(){this.fetchProductData()}))}},{key:"ivrproductchange",value:function(e,t){this.setState({selectedIvrProduct:e.target.value,ivrQueues:[],selectedValue:[{label:"Select IVR Queues",value:"0"}]},(function(){this.fetchQueueData()}))}},{key:"conftypechange",value:function(e,t){this.setState({ConfType:e.target.value},(function(){}))}},{key:"onSelect",value:function(e,t){console.log("selectlist",e);var a=e.filter((function(e){return"Select IVR Queues"!==e.label}));this.setState({selectedValue:a})}},{key:"render",value:function(){var e,t,a=this,o=this.columnlist,i=(this.moreinfolist,this.state),s=(i.items,i.PageTitle),r=i.MobileAbandonReport,l=i.showAlert,c=i.AlertMsg,u=i.AlertVarient;i.ReportTime,i.MoreInfoData;console.log("MobileAbandonReport",r),console.log("columns",o);return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"content"},d.a.createElement(I.a,{show:l,variant:u,body:c}),d.a.createElement(C.a,null),d.a.createElement(O.a,null,d.a.createElement(k.a,{md:"12"},d.a.createElement(T.a,null,d.a.createElement(j.a,null,d.a.createElement(O.a,null,d.a.createElement(k.a,{md:12},d.a.createElement(Y.a,{tag:"h5"},s))),d.a.createElement(O.a,null,d.a.createElement(k.a,{md:2},d.a.createElement(N.a.Group,{controlId:"ivrtype_dropdown"},d.a.createElement(h.a,{firstoption:"Select Ivr Type",value:this.state.ivrType,col:this.IvrTypeList,onChange:this.ivrtypechange}))),d.a.createElement(k.a,{md:2},d.a.createElement(N.a.Group,{controlId:"product_dropdown"},d.a.createElement(g.a,{firstoption:"Select Ivr Product",items:this.state.ivrProducts,onChange:this.ivrproductchange}))),d.a.createElement(k.a,{md:3},d.a.createElement(v.a,{options:this.state.ivrQueues,value:this.state.selectedValue,onChange:this.onSelect,selectAllLabel:"Select ALL IVR Queues"})),d.a.createElement(k.a,{md:3},d.a.createElement(N.a.Group,{as:k.a,md:12,controlId:"conftype_dropdown"},d.a.createElement(g.a,{firstoption:"Select Conference Type",items:this.state.confTypes,onChange:this.conftypechange}))),d.a.createElement(k.a,{md:2},d.a.createElement(M,(e={value:new Date,dateFormat:"YYYY-MM-DD"},Object(n.a)(e,"value",this.state.startdate),Object(n.a)(e,"isValidDate",this.validation),Object(n.a)(e,"onChange",(function(e){return a.handleStartDateChange(e)})),Object(n.a)(e,"utc",!0),Object(n.a)(e,"timeFormat",!1),Object(n.a)(e,"className","form-group"),e))),d.a.createElement(k.a,{md:2},d.a.createElement(M,(t={value:new Date,dateFormat:"YYYY-MM-DD"},Object(n.a)(t,"value",this.state.enddate),Object(n.a)(t,"isValidDate",this.validationEndDate),Object(n.a)(t,"onChange",(function(e){return a.handleEndDateChange(e)})),Object(n.a)(t,"utc",!0),Object(n.a)(t,"timeFormat",!1),Object(n.a)(t,"className","form-group"),t))),d.a.createElement(k.a,{md:1},d.a.createElement(w.a,{className:this.state.addClassDisabled,variant:"primary",onClick:function(){return a.fetchAbandonData()}},"Fetch")))),d.a.createElement(_.a,null,d.a.createElement(y.a,{columns:o,data:r&&r.length>0?r:[]})))))),d.a.createElement("audio",{src:"",id:"audio2"}))}}]),a}(d.a.Component);t.default=Object(p.b)((function(e){return{CommonData:e.CommonData}}),{GetCommonData:u.g,GetCommonspData:u.h,GetMySqlData:m.b,GetDataDirect:m.a})(L)},428:function(e,t,a){"use strict";var n=a(39),o=a(40),i=a(42),s=a(41),r=a(0),l=a.n(r),c=a(440),d=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={show:o.props.show},o}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState({show:e.show}),e.show&&setTimeout(function(){this.setState({show:!1})}.bind(this),5e3)}},{key:"render",value:function(){return this.state.show?l.a.createElement(c.a,{variant:this.props.variant},this.props.body):null}}]),a}(l.a.Component);t.a=d},432:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return m}));var n=a(4),o=a.n(n),i=a(1),s=a(9),r=function(e){return e.dataToSend.state&&e.dataToSend.statename&&localStorage.setItem(e.dataToSend.statename,JSON.stringify(e.data)),{type:s.a.GET_COMMON_SUCCESS,payload:e.data,root:e.dataToSend.root}},l=function(e){return{type:s.a.GET_COMMON_FAIL,payload:e}},c=function(e,t){if(null!=e.data||void 0!=e.data)return function(t,a){t(r({data:e.data,dataToSend:e}))};try{if(e.state&&localStorage.getItem(e.statename)||localStorage.getItem(e.statename))return function(t,a){var n=JSON.parse(localStorage.getItem(e.statename));t(r({data:n,dataToSend:e}))}}catch(a){}return function(a,n){o.a.get(i.a.api.base_url+"/mydb/list/",{params:e}).then((function(n){e.state&&e.statename&&localStorage.setItem(e.statename,JSON.stringify(n.data.data)),t&&t(n),a(r({data:n.data.data[0],dataToSend:e}))})).catch((function(e){a(l(e))}))}},d=function(e,t){return function(a,n){o.a.post(i.a.api.base_url+"/mydb/insert/",{data:e}).then((function(e){var n;t&&t(e),a((n={data:e.data},{type:s.a.INSERT_COMMON_SUCCESS,payload:n.data}))})).catch((function(e){a(function(e){return{type:s.a.INSERT_COMMON_FAIL,payload:e}}(e))}))}},u=function(e,t){return function(a,n){o.a.post(i.a.api.base_url+"/mydb/update/",{data:e}).then((function(e){var n;t&&t(e),a((n={data:e.data},{type:s.a.UPDATE_COMMON_SUCCESS,payload:n.data}))})).catch((function(e){a(function(e){return{type:s.a.UPDATE_COMMON_FAIL,payload:e}}(e))}))}},m=function(e,t){try{if(e.state&&localStorage.getItem(e.statename)||localStorage.getItem(e.statename)){var a=JSON.parse(localStorage.getItem(e.statename));return void t(a)}}catch(n){}o.a.get(i.a.api.base_url+"/mydb/list/",{params:e}).then((function(a){e.state&&e.statename&&localStorage.setItem(e.statename,JSON.stringify(a.data.data)),t(a.data.data)})).catch((function(e){}))}},441:function(e,t,a){"use strict";var n=a(39),o=a(40),i=a(42),s=a(41),r=a(0),l=a.n(r),c=a(61),d=a(90),u=a(1289),m=a(185),p=(a(452),a(453)),f=a.n(p),h=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={nodes:[],checked:[],expanded:[]},o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=2==Object(d.j)().RoleId?75:Object(d.j)().UserID;Object(c.k)({root:"Hierarchy",ManagerId:e,statename:"Hierarchy-"+e,value:this.props.value,state:!0},function(e){var t=JSON.stringify(e).replace(/UserName/g,"label");t=t.replace(this.props.value,"value"),this.setState({nodes:JSON.parse(t)})}.bind(this))}},{key:"componentWillReceiveProps",value:function(e){}},{key:"onButtonClick",value:function(){this.props.handleShow({SelectedSupervisors:this.state.checked}),this.forceUpdate()}},{key:"onMouseEnter",value:function(e){document.getElementById("floating").style.right=0,document.getElementById("handle").style.right="395px"}},{key:"onMouseOut",value:function(e){setTimeout((function(){document.getElementById("floating").style.right="-400px",document.getElementById("handle").style.right="-15px"}),700)}},{key:"RemoveChecked",value:function(e){var t=this.state.checked,a=t.indexOf(e);a>-1&&t.splice(a,1),this.setState(t)}},{key:"onClick",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.nodes;t.checked;return 0==a.length?null:l.a.createElement("div",{id:"floating",className:"floating",onMouseLeave:this.onMouseOut},l.a.createElement(u.a,null,l.a.createElement(m.a,{md:"8"},l.a.createElement("div",{id:"handle",className:"handle",onClick:this.onMouseEnter},"Filter")),l.a.createElement(m.a,{md:"4"},l.a.createElement("input",{type:"button",className:"btn btn-primary",onClick:this.onButtonClick.bind(this),value:"Show"}))),l.a.createElement(u.a,null,l.a.createElement(m.a,null,l.a.createElement("div",{className:"managers"},l.a.createElement(f.a,{nodes:a,checked:this.state.checked,expanded:this.state.expanded,checkModel:"all",name:"UserName",showNodeIcon:!1,onCheck:function(t){return e.setState({checked:t})},onExpand:function(t){return e.setState({expanded:t})},showExpandAll:!0})))))}}]),a}(l.a.Component);t.a=h},446:function(e,t,a){"use strict";var n=a(39),o=a(40),i=a(42),s=a(41),r=a(0),l=a.n(r),c=a(420),d=a(30),u=a(432),m=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={items:[]},o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.state.items&&0===this.state.items.length&&this.CallApi()}},{key:"componentWillReceiveProps",value:function(e){if(!e.CommonData.isError&&e.CommonData[this.props.col.config.root]){var t=JSON.stringify(e.CommonData[this.props.col.config.root]).replace(this.props.col.config.Idfield,"Id");t=t.replace(this.props.col.config.Displayfield,"Display"),this.setState({items:JSON.parse(t)})}}},{key:"componentWillUpdate",value:function(){}},{key:"CallApi",value:function(){this.props.GetMySqlData({limit:10,skip:0,root:this.props.col.config.root,cols:this.props.col.config.cols,con:this.props.col.config.con,data:this.props.col.config.data,statename:this.props.col.config.statename,state:this.props.col.config.state})}},{key:"render",value:function(){var e=this.state.items,t=this.props,a=t.value,n=t.onChange;return e||(e=[]),0==t.visible?null:l.a.createElement("div",null,l.a.createElement(c.a.Control,{as:"select",disabled:this.props.disabled,value:a,name:this.props.col.name,onChange:n},l.a.createElement("option",{key:0,value:0},this.props.firstoption?this.props.firstoption:"Select"),e.map((function(e){return l.a.createElement("option",{key:e.Id,value:e.Id},e.Display)}))))}}]),a}(l.a.Component);t.a=Object(d.b)((function(e){return{CommonData:e.CommonData}}),{GetMySqlData:u.b})(m)},448:function(e,t,a){"use strict";var n=a(39),o=a(40),i=a(42),s=a(41),r=a(0),l=a.n(r),c=a(420),d=(a(30),a(61),function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={items:[]},o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState({items:e.items})}},{key:"displayoption",value:function(e){return l.a.createElement("option",{key:e.Id,value:e.Id},e.Display)}},{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.value,o=t.onChange,i=t.visible,s=t.items;return s||(s=[]),0==i?null:l.a.createElement("div",null,l.a.createElement(c.a.Control,{as:"select",disabled:this.props.disabled,value:n,name:a,onChange:o},!1!==this.props.firstoption&&l.a.createElement("option",{key:0,value:0},this.props.firstoption?this.props.firstoption:"Select"),s.map((function(t){return e.displayoption(t)}))))}}]),a}(l.a.Component));t.a=d}}]);
//# sourceMappingURL=39.c6ee8e5a.chunk.js.map